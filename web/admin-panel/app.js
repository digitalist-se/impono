!function e(t,r,n){function i(a,s){if(!r[a]){if(!t[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(o)return o(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var l=r[a]={exports:{}};t[a][0].call(l.exports,function(e){var r=t[a][1][e];return i(r?r:e)},l,l.exports,e,t,r,n)}return r[a].exports}for(var o="function"==typeof require&&require,a=0;a<n.length;a++)i(n[a]);return i}({1:[function(e,t,r){"use strict";var n=e("./app.js"),i="admin.application.prod";angular.module(i,[n.MODULE_NAME]),angular.element(document).ready(function(){angular.bootstrap(document,[i])})},{"./app.js":2}],2:[function(e,t,r){"use strict";var n=e("./modules/security/security.js"),i=e("./modules/update/update.js"),o=e("./modules/user/user.js"),a=e("./modules/tagContainer/tagContainer.js"),s=e("./modules/tag/tag.js"),u=e("./modules/trigger/trigger.js"),c=e("./modules/variable/variable.js"),l=e("./modules/integration/integration.js"),f=e("./modules/condition/condition.js"),d=e("./modules/debug/debug.js"),h=e("./modules/optOut/optOut.js"),p=e("./../modules/alert/alert.js"),v=e("./../modules/translation/translation.js"),g=e("./../modules/form/form.js"),m=e("./../modules/confirm/confirm.js"),y=e("./../modules/sanitize/sanitize.js"),b=e("./../modules/clipboard/clipboard.js"),j=e("./../modules/pageInfo/pageInfo.js"),w=e("./../modules/helpSystem/helpSystem.js"),P=e("./../modules/validator/validator.js"),_=e("./../modules/textEditor/textEditor.js"),C="admin.application";angular.module("admin.application.plugins",[s.MODULE_NAME]),angular.module(C,["pascalprecht.translate","cgBusy","ui.router","ui.bootstrap","checklist-model","http-auth-interceptor",n.MODULE_NAME,i.MODULE_NAME,o.MODULE_NAME,f.MODULE_NAME,u.MODULE_NAME,c.MODULE_NAME,l.MODULE_NAME,s.MODULE_NAME,a.MODULE_NAME,h.MODULE_NAME,p.MODULE_NAME,v.MODULE_NAME,g.MODULE_NAME,m.MODULE_NAME,y.MODULE_NAME,b.MODULE_NAME,j.MODULE_NAME,w.MODULE_NAME,P.MODULE_NAME,d.MODULE_NAME,_.MODULE_NAME,"ngClipboard","admin.application.plugins"]).run(["$rootScope","$state","clearcode.tm.alert.$alert","clearcode.tm.security.security","clearcode.tm.security.oauthResource","clearcode.tm.security.tokenStorage","authService","clearcode.tm.variable.$variableForm",function(e,t,r,n,i,o,a,s){var u=!1;s.addType("dataLayer",{templateUrl:"app/modules/variable/views/types/dataLayer.html"}).addType("cookie",{templateUrl:"app/modules/variable/views/types/cookie.html"}).addType("constant",{templateUrl:"app/modules/variable/views/types/constant.html"}).addType("document",{templateUrl:"app/modules/variable/views/types/document.html"}).addType("random",{templateUrl:"app/modules/variable/views/types/random.html"}).addType("url",{templateUrl:"app/modules/variable/views/types/url.html"}).addType("campaign",{templateUrl:"app/modules/variable/views/types/campaign.html"}),r.addMessagePattern("error.invalid","Form is invalid. Please correct selected fields"),r.addMessagePattern("success.create","Settings saved successfully"),r.addMessagePattern("success.edit","Settings saved successfully"),r.addMessagePattern("success.remove","Deleted successfully"),e.$state=t,e.animateSidebarReady=!1,e.isContainerView=function(){return!1},e.$on("$stateChangeStart",function(t,r,i){e.isContainerView=function(){var t=void 0!==r.data.hasContainerList&&r.data.hasContainerList,i=n.isAuthenticated();return e.animateSidebarReady===!1&&t&&i&&(e.animateSidebarReady=!0),t&&i},e.activeContainerId=i.containerId}),e.$on("event:auth-loginRequired",function(){var e=o.getItem();(u||void 0!==e)&&i.refreshToken(e.refreshToken).then(function(e){o.addItem(e),a.loginConfirmed("success",function(e){return e.headers.Authorization=o.getToken(),e})},function(){o.removeItem(),a.loginCancelled("invalid"),t.go("signIn")}),u=!u})}]).config(["$urlRouterProvider","ngClipProvider","$translateProvider",function(e,t,r){e.otherwise("/containers"),t.setPath("ZeroClipboard.swf"),r.useSanitizeValueStrategy("escape"),r.useStaticFilesLoader({prefix:"/api/translations/",suffix:".json"}),r.preferredLanguage("en"),r.useLocalStorage()}]).value("cgBusyDefaults",{wrapperClass:"loading"}).value("longDataFormat","dd MMMM yyyy").value("defaultDateFormat","yyyy-MM-dd HH:mm").filter("reverse",function(){return function(e){return e.slice().reverse()}}),t.exports={MODULE_NAME:C}},{"./../modules/alert/alert.js":95,"./../modules/clipboard/clipboard.js":103,"./../modules/confirm/confirm.js":105,"./../modules/form/form.js":112,"./../modules/helpSystem/helpSystem.js":115,"./../modules/pageInfo/pageInfo.js":120,"./../modules/sanitize/sanitize.js":124,"./../modules/textEditor/textEditor.js":130,"./../modules/translation/translation.js":133,"./../modules/validator/validator.js":135,"./modules/condition/condition.js":3,"./modules/debug/debug.js":9,"./modules/integration/integration.js":17,"./modules/optOut/optOut.js":20,"./modules/security/security.js":27,"./modules/tag/tag.js":42,"./modules/tagContainer/tagContainer.js":56,"./modules/trigger/trigger.js":64,"./modules/update/update.js":69,"./modules/user/user.js":80,"./modules/variable/variable.js":94}],3:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var i=e("./resource/ConditionResource.js"),o=n(i),a=e("./services/Condition.js"),s=n(a),u="clearcode.tm.condition";s["default"].$inject=[u+".conditionResource","clearcode.tm.tagContainer.currentContainer"],o["default"].$inject=["$http","$q"],angular.module(u,["clearcode.tm.tagContainer"]).service(u+".conditionResource",o["default"]).service(u+".condition",s["default"]),t.exports={MODULE_NAME:u}},{"./resource/ConditionResource.js":5,"./services/Condition.js":6}],4:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){var e=function t(){n(this,t),this.id=void 0,this.variable=void 0,this.condition=void 0,this.value=void 0};return e};r["default"]=i},{}],5:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=e("../entity/Condition.js"),s=n(a),u=function(){function e(t,r){i(this,e),this.http=t,this.q=r}return o(e,[{key:"getEntityObject",value:function(){var e=(0,s["default"])();return new e}},{key:"query",value:function(e){var t=this.q.defer();return this.http({method:"GET",url:"/api/containers/"+e+"/conditions"}).success(function(e){t.resolve(e)}).error(function(e){t.reject(e)}),t.promise}}]),e}();r["default"]=u},{"../entity/Condition.js":4}],6:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){var r=[];for(var n in e){var i=!1;for(var a in t)if(o(t[a],e[n])){i=!0;break}i||r.push(e[n])}return r.concat(t)}function o(e,t){return e.name===t.name}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function(e,t){var r=t;return e.filter(function(e){return e.type===r})},u=void 0,c=void 0,l=function(){function e(t,r){n(this,e),u=r,c=t,void 0!==u.getId()&&(this.conditionResourcePromise=c.query(u.getId()))}return a(e,[{key:"getArrayOfTypes",value:function(){return this.conditionResourcePromise.then(function(e){for(var t=[],r=e.length;r--;)t[e[r].type]=e[r].name;return t})}},{key:"allVariables",value:function(){return this.conditionResourcePromise.then(function(e){for(var t=[],r=0;r<e.length;r++)t=t.length?i(t,e[r].variables):e[r].variables;return t})}},{key:"getVariables",value:function(e){return this.conditionResourcePromise.then(function(t){var r=s(t,e);return 1===r.length&&r[0].variables})}},{key:"getRequired",value:function(e){return this.conditionResourcePromise.then(function(t){var r=s(t,e);return 1===r.length&&r[0].variables.filter(function(e){return"Event"===e.name&&"Event"===r[0].name})})}},{key:"getActions",value:function(e){return this.conditionResourcePromise.then(function(t){var r=s(t,e);return 1===r.length&&r[0].actions})}},{key:"refresh",value:function(){this.conditionResourcePromise=c.query(u.getId())}}]),e}();r["default"]=l},{}],7:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=void 0,o=void 0,a=void 0,s=void 0,u=void 0,c="Debug",l=function f(e,t,r,l,d,h,p){var v=this;n(this,f),i=t,o=r,a=l,s=h,u=p,this.container=e.getEntityObject(),this.containerPromise=e.get(o.containerId),this.containerPromise.then(function(e){v.container=e}),a.getContainer().then(function(){a.$container.hasPermission("noaccess")&&i.go("container"),u([c]).then(function(e){d.clear().add(a.$container.name,"tags",{containerId:a.$container.id}).add(e[c]).broadcast()})}),s.$on("pageInfo.reload",function(e,t){u([c]).then(function(e){d.clear().add(t.name,"tags",{containerId:t.id}).add(e[c]).broadcast()})})};r["default"]=l},{}],8:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=void 0,a=void 0,s=void 0,u=void 0,c=void 0,l=function(){function e(t,r,i,l,f,d,h){var p=this;n(this,e),o=r,a=i,s=l,u=f,c=t,this.websites=[],this.websitesPromise=c.query(a.containerId),this.websitesPromise.then(function(e){p.websites=e.data}),d(["by hash","by query"]).then(function(e){p.parameterTypes=[{value:0,name:e["by query"]},{value:1,name:e["by hash"]}]}),h.getWebsiteUrlWithParameter=function(e){return e.getUrlWithParameter()}}return i(e,[{key:"addContainerWebsite",value:function(){u.$container.hasPermission("edit")&&(this.websites||(this.websites=[]),this.websites.push(c.getEntityObject()))}},{key:"removeContainerWebsite",value:function(e){this.websites.splice(e,1)}},{key:"submitForm",value:function(){for(var e=this,t=[],r=0;this.websites&&r<this.websites.length;r++){var n=c.getEntityObject();n.url=this.websites[r].url,n.parameterType=this.websites[r].parameterType,t.push(n)}this.websitePromise=c.put(a.containerId,t),this.websitePromise.then(function(){u.get(a.containerId),s.success("success.edit"),o.go("debug",{containerId:a.containerId})},function(){s.error("error.invalid"),e.validateContainer=!0})}}]),e}();r["default"]=l},{}],9:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var i=e("./controllers/DebugOptionsController.js"),o=n(i),a=e("./controllers/WebsitesController.js"),s=n(a),u=e("./resource/WebsiteResource.js"),c=n(u),l="clearcode.tm.debug",f="clearcode.tm.tagContainer",d="app/modules/debug";c["default"].$inject=["$http","$q"],s["default"].$inject=[l+".websiteResource","$state","$stateParams","clearcode.tm.alert.alert",f+".currentContainer","$translate","$scope"],o["default"].$inject=[f+".containerResource","$state","$stateParams",f+".currentContainer","clearcode.tm.pageInfo.pageInfo","$scope","$translate"],angular.module(l,["pascalprecht.translate","ui.router","ngTable","ngCookies","clearcode.tm.condition","clearcode.tm.alert","clearcode.tm.pageInfo","clearcode.tm.user"]).run(["$rootScope",f+".currentContainer","$stateParams",function(e,t,r){e.currentContainerLoading=!0,e.currentContainer=t;var n=function(n){if(n!==r.containerId){var i=t.get(n);i.then(function(t){e.$broadcast("pageInfo.reload",t)})}};e.$on("$stateChangeStart",function(e,t,r){n(r.containerId)})}]).config(["$stateProvider",function(e){e.state("debug",{url:"/containers/{containerId}/debug",controller:l+".DebugOptionsController as view",templateUrl:d+"/views/options.html",data:{roles:["ROLE_SUPER_ADMIN"],hasContainerList:!0,permission:["view"]}})}]).controller(l+".DebugOptionsController",o["default"]).controller(l+".WebsitesController",s["default"]).service(l+".websiteResource",c["default"]),t.exports={MODULE_NAME:l}},{"./controllers/DebugOptionsController.js":7,"./controllers/WebsitesController.js":8,"./resource/WebsiteResource.js":11}],10:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(){var e="_stg_debug",t=10,r=function(){function r(){n(this,r),this.url="",this.parameterType=0}return i(r,[{key:"getUrlWithParameter",value:function(){return this.hasUrl()===!1?"":this.url+this.getSeparator()+e}},{key:"getSeparator",value:function(){var e=1===this.parameterType?"#":"?";return this.hasUrl()===!1?e:this.url.indexOf(e)===-1?e:"&"}},{key:"hasUrl",value:function(){return void 0!==this.url&&this.url.length>t}}]),r}();return r};r["default"]=o},{}],11:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){return t<400&&void 0!==e.data}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=e("../entity/Website.js"),u=n(s),c=function d(e){var t=this;if(angular.isArray(e))return e.map(function(e){return d.call(t,e)});var r=this.getEntityObject();return void 0!==e&&(r.url=e.url,r.parameterType=e.parameter_type),r},l=function(e,t){return e=angular.isArray(e)?e:[e],e.concat(t)},f=function(){function e(t,r){i(this,e),this.http=t,this.q=r}return a(e,[{key:"getEntityObject",value:function(){var e=(0,u["default"])(this);return new e}},{key:"query",value:function(e,t){var r=this,n=this.q.defer();return this.http({method:"GET",url:"/api/containers/"+e+"/websites",params:t,transformResponse:l(this.http.defaults.transformResponse,function(e,t,n){if(o(e,n))for(var i=0;i<e.data.length;i++)e.data[i]instanceof Object&&(e.data[i]=c.call(r,e.data[i]));return e})}).success(function(e){n.resolve(e)}).error(function(e){n.reject(e)}),n.promise}},{key:"put",value:function(e,t){var r=this,n=this.q.defer();return this.http({method:"PUT",data:{websites:t},url:"api/containers/"+e+"/websites",transformResponse:l(this.http.defaults.transformResponse,function(e,t,n){return o(e,n)?c.call(r,e.data):e})}).success(function(e){n.resolve(e)}).error(function(e){n.reject(e)}),n.promise}}]),e}();r["default"]=f},{"../entity/Website.js":10}],12:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(){function e(t,r,i,o,a,s){var u=this;n(this,e);var c="Integrations";this.integration=t.getEntityObject(),this.stateParams=i,this.alert=o,this.state=a,this.formTouched=!1,s([c,this.getBreadcrumbText()]).then(function(e){r.clear().add(e[c],"integration").add(e[u.getBreadcrumbText()]).broadcast()})}return i(e,[{key:"submitForm",value:function(e){var t=this;this.integrationPromise=e.save(this.stateParams.id),this.integrationPromise.then(function(e){t.alert.success(t.getAlertType()),t.state.includes("integrationCreate")?t.state.go("integrationEdit",{integrationId:e.id}):t.state.go("integration")},function(){t.alert.error("error.invalid")})}},{key:"displayInvalidFormMessage",value:function(){this.validateIntegration=!0,this.alert.error("error.invalid")}}]),e}();r["default"]=o},{}],13:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=e("./BaseController.js"),c=n(u),l=function(e){function t(e,r,n,a,s,u){i(this,t);var c=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r,n,a,s,u));return c.integration=e.getEntityObject(),c}return a(t,e),s(t,[{key:"getBreadcrumbText",value:function(){return"Add a new integration"}},{key:"getAlertType",value:function(){return"success.create"}}]),t}(c["default"]);r["default"]=l},{"./BaseController.js":12}],14:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=e("./BaseController.js"),c=n(u),l=function(e){function t(e,r,n,a,s,u){i(this,t);var c=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r,n,a,s,u));return c.integrationPromise=e.get(n.integrationId),c.integrationPromise.then(function(e){c.integration=e}),c.formTouched=!0,c}return a(t,e),s(t,[{key:"getBreadcrumbText",value:function(){return"Edit integration"}},{key:"getAlertType",value:function(){return"success.edit"}}]),t}(c["default"]);r["default"]=l},{"./BaseController.js":12}],15:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=void 0,a="Integrations",s=function(){function e(t,r,i,s,u,c){n(this,e),o=i,this.permissions=[],this.tableParams=new t({page:1,count:10,sorting:{name:"asc"}},{total:0,getData:function(e,t){r.query(s.list(t.url())).then(function(r){t.total(r.total),e.resolve(r.data)})}}),c([a]).then(function(e){u.clear().add(e[a]).broadcast()})}return i(e,[{key:"removeIntegration",value:function(e){var t=this;e.remove().then(function(){o.success("success.remove"),1===t.tableParams.data.length&&t.tableParams.page()>1?t.tableParams.page(t.tableParams.page()-1):t.tableParams.reload()},function(){o.error("error.remove"),t.tableParams.reload()})}}]),e}();r["default"]=s},{}],16:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(e){var t=function(){function t(){n(this,t),this.id=void 0,this.name=void 0,this.clientId=void 0,this.clientSecret=void 0,this.createdAt=void 0,this.updatedAt=void 0,this.user=void 0}return i(t,[{key:"save",value:function(){var t,r={},n=["id","updatedAt","createdAt","clientId","clientSecret","user"];for(var i in this)!angular.isFunction(this[i])&&this.hasOwnProperty(i)&&n.indexOf(i)===-1&&("type"===i?r[i]=this[i].id:r[i]=this[i]);return void 0===this.id?(this.user.email&&(r.user={},r.user.email=this.user.email),t=e.post(r)):t=e.put(this.id,r),t}},{key:"remove",value:function(){return void 0!==this.id&&e["delete"](this.id)}}]),t}();return t};r["default"]=o},{}],17:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var i=e("./controllers/ManageController.js"),o=n(i),a=e("./controllers/CreateController.js"),s=n(a),u=e("./controllers/EditController.js"),c=n(u),l=e("./resource/IntegrationResource.js"),f=n(l),d="clearcode.tm.integration",h="app/modules/integration";o["default"].$inject=["ngTableParams",d+".IntegrationResource","clearcode.tm.alert.alert","clearcode.tm.tagContainer.paramConverter","clearcode.tm.pageInfo.pageInfo","$translate"],s["default"].$inject=[d+".IntegrationResource","clearcode.tm.pageInfo.pageInfo","$stateParams","clearcode.tm.alert.alert","$state","$translate"],c["default"].$inject=[d+".IntegrationResource","clearcode.tm.pageInfo.pageInfo","$stateParams","clearcode.tm.alert.alert","$state","$translate"],f["default"].$inject=["$http","$q"],angular.module(d,["pascalprecht.translate","ui.router","ngTable","clearcode.tm.alert","clearcode.tm.pageInfo","clearcode.tm.tagContainer"]).config(["$stateProvider",function(e){e.state("integration",{url:"/integration",controller:d+".ManageController as view",templateUrl:h+"/views/manage.html",data:{roles:["ROLE_SUPER_ADMIN"],hasContainerList:!1}}).state("integrationCreate",{url:"/integration/create",controller:d+".CreateController as view",templateUrl:h+"/views/create.html",data:{roles:["ROLE_SUPER_ADMIN"],hasContainerList:!1}}).state("integrationEdit",{url:"/integration/{integrationId}/edit",controller:d+".EditController as view",templateUrl:h+"/views/edit.html",data:{roles:["ROLE_SUPER_ADMIN"],hasContainerList:!1}})}]).run(["clearcode.tm.alert.$alert",function(e){e.addMessagePattern("integration.close","You are trying to close unsaved OAuth client.")}]).controller(d+".ManageController",o["default"]).controller(d+".CreateController",s["default"]).controller(d+".EditController",c["default"]).service(d+".IntegrationResource",f["default"]),t.exports={MODULE_NAME:d}},{"./controllers/CreateController.js":13,"./controllers/EditController.js":14,"./controllers/ManageController.js":15,"./resource/IntegrationResource.js":18}],18:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=e("../entity/Integration.js"),s=n(a),u=function(e){var t=(0,s["default"])(this),r=new t;return r.id=e.id,r.name=e.name,r.clientId=e.client_id,r.clientSecret=e.client_secret,r.createdAt=e.created_at,r.updatedAt=e.updated_at,r.user={id:void 0,status:void 0,roles:[],email:void 0},e.user&&(r.user.id=e.user.id,r.user.status=e.user.status,r.user.roles=e.user.roles,e.user.email&&(r.user.email=e.user.email)),r},c=function(e,t){return e=angular.isArray(e)?e:[e],e.concat(t)},l=function(){function e(t,r){i(this,e),this.http=t,this.q=r}return o(e,[{key:"getEntityObject",value:function(){var e=(0,s["default"])(this);return new e}},{key:"get",value:function(e){var t=this,r=this.q.defer();return this.http({method:"GET",url:"/api/integration/"+e,transformResponse:c(this.http.defaults.transformResponse,function(e,r,n){return n<400?u.call(t,e.data):e})}).success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise}},{key:"query",value:function(e){var t=this,r=this.q.defer();return this.http({method:"GET",url:"/api/integration",params:e,transformResponse:c(this.http.defaults.transformResponse,function(e){for(var r in e.data)e.data[r]instanceof Object&&(e.data[r]=u.call(t,e.data[r]));return e})}).success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise}},{key:"delete",value:function(e){var t=this.q.defer();return this.http({method:"DELETE",url:"/api/integration/"+e}).success(function(e){t.resolve(e)}).error(function(e){t.reject(e)}),t.promise}},{key:"post",value:function(e){var t=this,r=this.q.defer();return this.http({method:"POST",url:"/api/integration",data:e,transformResponse:c(this.http.defaults.transformResponse,function(e,r,n){return n<400?u.call(t,e.data):e})}).success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise}},{key:"put",value:function(e,t){var r=this,n=this.q.defer();return this.http({method:"PUT",url:"/api/integration/"+e,data:t,transformResponse:c(this.http.defaults.transformResponse,function(e,t,n){return n<400?u.call(r,e.data):e})}).success(function(e){n.resolve(e)}).error(function(e){n.reject(e)}),n.promise}}]),e}();r["default"]=l},{"../entity/Integration.js":16}],19:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=void 0,a=void 0,s=void 0,u="Opt-out generator",c="You can choose to opt out of being tracked by all marketing and advertising tools installed on this website. \nTo make that choice, please click below to receive an opt-out cookie.",l="You are currently opted in. Click here to opt out.",f="You are currently opted out. Click here to opt in.",d=function(){function e(t,r,i,u){var d=this;n(this,e),o=t,a=u,s=r,this.options=[{name:"domain",value:0},{name:"global",value:1}],this.option=0,this.optOutMessage=c,this.optInOption=l,this.optOutOption=f,i.$watch("view.option",function(){d.generateSnippet()}),this.setPageInfo(),this.generateSnippet()}return i(e,[{key:"setPageInfo",value:function(){a([u]).then(function(e){o.clear().add(e[u]).broadcast()})}},{key:"generateSnippet",value:function(){this.snippet=s.buildSnippet(this.option,this.optInOption,this.optOutOption,this.optOutMessage.replace(/\n/g,"<br>"))}}]),e}();r["default"]=d},{}],20:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var i=e("./controllers/GeneratorController.js"),o=n(i),a=e("./services/Snippet.js"),s=n(a),u="clearcode.tm.optOut",c="app/modules/optOut";o["default"].$inject=["clearcode.tm.pageInfo.pageInfo",u+".snippet","$scope","$translate"],angular.module(u,["pascalprecht.translate","ui.router","clearcode.tm.alert","clearcode.tm.pageInfo","clearcode.tm.form","clearcode.tm.security"]).config(["$stateProvider",function(e){e.state("optOutGenerator",{url:"/opt-out",controller:u+".GeneratorController as view",templateUrl:c+"/views/generator.html",data:{roles:["ROLE_SUPER_ADMIN"],hasContainerList:!1}})}]).controller(u+".GeneratorController",o["default"]).service(u+".snippet",s["default"]),t.exports={MODULE_NAME:u}},{"./controllers/GeneratorController.js":19,"./services/Snippet.js":21}],21:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o="<!-- Start 7Tag privacy opt-out code -->",a="<!-- End 7Tag privacy opt-out code -->",s=window.location.hostname,u=function(){function e(){n(this,e)}return i(e,[{key:"buildSnippet",value:function(e,t,r,n){var i=o+this.buildVariablesInitialization(t,r,e)+this.buildExternalScript()+this.buildMainMessage(n)+a;return i}},{key:"buildVariablesInitialization",value:function(e,t,r){return"<script>window.sevenTag = window.sevenTag || {};"+('window.sevenTag.optedOutCheckboxText="'+t+'";')+('window.sevenTag.optedInCheckboxText="'+e+'";')+("window.sevenTag.isGlobal="+!!r+";")+('window.sevenTag.instanceHostname="'+s+'";</script>')}},{key:"buildExternalScript",value:function(){return'<script src="//'+s+'/containers/privacy/script.v2.js"></script>'}},{key:"buildMainMessage",value:function(e){return'<div id="_stg_opt_out_iframe_content" style="display: none;">'+("<p>"+e+"</p>")+'<input id="_stg_optout_checkbox" onclick="window.parent.storeUserOptOutPreferences();" type="checkbox"><label id="_stg_optout_checkbox_label" for="_stg_optout_checkbox"></label></div>'}}]),e}();r["default"]=u},{}],22:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=void 0,a=void 0,s=void 0,u=void 0,c="Welcome to Impono",l=function(){function e(t,r,i,l,f){n(this,e),this.auth={identity:"",password:""},this.loginPromise=void 0,o=t,a=r,s=i,u=l,u.getStorage().clean(),f.clear().add(c).broadcast()}return i(e,[{key:"submitForm",value:function(e){var t=this;this.loading=!0,this.loginPromise=o.post(e.identity,e.password),this.loginPromise.then(function(e){u.getStorage().clean(),a.addItem(e),s.go("container")},function(){t.loading=!1})}},{key:"displayInvalidLoginMessage",value:function(){u.error("login.invalid")}}]),e}();r["default"]=l},{}],23:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(e,t,r){var n="DELETE",i="/remove";return{request:function(e){return e.method.toUpperCase()===n&&t.deleteHeaderNotSupported===!0&&(e.method="POST",e.url+=i),e},responseError:function(o){var a=r.get("$http");return o.config.method.toUpperCase()===n&&405===o.status?(t.deleteHeaderNotSupported=!0,a.post(o.config.url+i)):e.reject(o)}}};r["default"]=n},{}],24:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n="en",i=function(e){return{request:function(t){var r=e.localStorage.NG_TRANSLATE_LANG_KEY;return/^https?:\/\//i.test(t.url)||(t.headers.Locale=r?r:n),t}}};r["default"]=i},{}],25:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(e,t,r){return{request:function(e){return void 0!==t.getItem()&&/(.js|.html|.css|.json)$/.test(e.url)===!1&&(e.headers.Authorization=t.getToken()),
e},responseError:function(n){var i=r.get("$state");return 400===n.status&&(!n.data||"invalid_request"!==n.data.error&&"invalid_grant"!==n.data.error||(t.removeItem(),i.go("signIn"))),403===n.status&&i.go("accessDenied"),e.reject(n)}}};r["default"]=n},{}],26:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=e("../token/AuthToken.js"),s=n(a),u="/api/oauth/v2/token",c="/api/users/me/logout",l="password",f=function(e,t,r){var n=void 0;if(r<400){var i=this.getEntity();i.accessToken=e.access_token,i.expiresIn=e.expires_in,i.tokenType=e.token_type,i.scope=e.scope,i.refreshToken=e.refresh_token,n=i}else n=e;return n},d=function(e,t){return e=angular.isArray(e)?e:[e],e.concat(t)},h=function(){function e(t,r,n,o){i(this,e),this.http=t,this.q=r,this.tokenStorage=n,this.OAuthClientSettings=o}return o(e,[{key:"getEntity",value:function(){var e=this;return s["default"].prototype.save=function(){var t=e.q.defer();return e.tokenStorage.add(e),t.resolve(e),t.promise},s["default"].prototype.remove=function(){var t=e.q.defer();return e.tokenStorage.remove(),t.resolve(e),t.promise},new s["default"]}},{key:"post",value:function(e,t){var r=this,n=this.q.defer();return this.http({method:"POST",url:u,data:{client_id:this.OAuthClientSettings.clientId,client_secret:this.OAuthClientSettings.clientSecret,grant_type:l,username:e,password:t},ignoreAuthModule:!0,transformResponse:d(this.http.defaults.transformResponse,function(e,t,n){return f.call(r,e,t,n)})}).success(function(e){n.resolve(e)}).error(function(e){n.reject(e)}),n.promise}},{key:"refreshToken",value:function(e){var t=this,r=this.q.defer();return this.http({method:"POST",url:u,data:{client_id:this.OAuthClientSettings.clientId,client_secret:this.OAuthClientSettings.clientSecret,grant_type:"refresh_token",refresh_token:e},ignoreAuthModule:!0,transformResponse:d(this.http.defaults.transformResponse,function(e,r,n){return void 0!==e.error?e:f.call(t,e,r,n)})}).success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise}},{key:"logout",value:function(){var e=this.q.defer();return this.http({method:"GET",url:c}).success(function(t){e.resolve(t)}).error(function(t){e.reject(t)}),e.promise}}]),e}();r["default"]=h},{"../token/AuthToken.js":31}],27:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var i=e("./controller/LoginController.js"),o=n(i),a=e("./service/Authorization.js"),s=n(a),u=e("./service/Security.js"),c=n(u),l=e("./resource/OAuthResource.js"),f=n(l),d=e("./service/TokenStorage.js"),h=n(d),p=e("./interceptor/SecurityInterceptor.js"),v=n(p),g=e("./interceptor/LocaleInterceptor.js"),m=n(g),y=e("./interceptor/DeleteRequestInterceptor.js"),b=n(y),j="clearcode.tm.security";s["default"].$inject=[j+".security","$state"],c["default"].$inject=["$q","$timeout",j+".tokenStorage","clearcode.tm.user.userResource",j+".oauthResource","$translate"],f["default"].$inject=["$http","$q",j+".tokenStorage","OAuthClientSettings"],o["default"].$inject=[j+".oauthResource",j+".tokenStorage","$state","clearcode.tm.form.alertForm","clearcode.tm.pageInfo.pageInfo"],v["default"].$inject=["$q",j+".tokenStorage","$injector"],h["default"].$inject=["$localStorage"],m["default"].$inject=["$window"],b["default"].$inject=["$q","$rootScope","$injector"],angular.module(j,["pascalprecht.translate","ui.router","clearcode.tm.alert","clearcode.tm.tagContainer","clearcode.tm.user","clearcode.tm.pageInfo","clearcode.tm.form","clearcode.tm.update"]).config(["$stateProvider","$httpProvider",function(e,t){t.interceptors.push(j+".securityInterceptor"),t.interceptors.push(j+".deleteRequestInterceptor"),t.interceptors.push(j+".localeInterceptor"),e.state("signIn",{url:"/sign-in",controller:j+".LoginController",controllerAs:"view",data:{roles:[],secure:!1},templateUrl:"/app/modules/security/views/signIn.html"}).state("accessDenied",{url:"/access-denied",data:{roles:[]},templateUrl:"/app/modules/security/views/accessDenied.html"})}]).run(["$rootScope",j+".authorization","$state",j+".security","clearcode.tm.alert.$alert","clearcode.tm.tagContainer.currentContainer",function(e,t,r,n,i,o){i.addMessagePattern("login.invalid","Login or password is incorrect. Please try again."),i.addMessagePattern("request.error","User with passed email address does not exist."),i.addMessagePattern("request.success","The email with the activation link has been sent successfully."),i.addMessagePattern("changePassword.success","Password has been changed successfully."),i.addMessagePattern("changePassword.error","Sorry, something went wrong. Try to reset your password one more time."),i.addMessagePattern("changePassword.token","Reset password token is required."),i.addMessagePattern("changePassword.notCurrentPassword","This value should be the users current password."),i.addMessagePattern("invalid.email","Your email address is invalid."),i.addMessagePattern("password.different","Repeat password does not match."),i.addMessagePattern("password.both","Both password fields requires at least 8 characters."),i.addMessagePattern("password.first","First password field requires at least 8 characters."),i.addMessagePattern("password.second","Second password field requires at least 8 characters."),e.logout=function(){n.logout().then(function(){o.disableDebugMode(),r.go("signIn")})},e.deleteHeaderNotSupported=!1,e.security=n,e.$on("$stateChangeStart",function(e,n){var i,o,a=void 0!==n.data;a&&(i=void 0===n.data.secure||n.data.secure,o=void 0!==n.data.roles?n.data.roles:[]),t.authorize(o).then(function(){},function(){i&&r.go("signIn")})})}]).value("$localStorage",localStorage).controller(j+".LoginController",o["default"]).service(j+".authorization",s["default"]).service(j+".security",c["default"]).service(j+".oauthResource",f["default"]).service(j+".tokenStorage",h["default"]).value("OAuthClientSettings",{clientId:"undefined"==typeof OAUTH_CLIENT_ID?"1_1234567890":OAUTH_CLIENT_ID,clientSecret:"undefined"==typeof OAUTH_CLIENT_SECRET?"sec1234567890":OAUTH_CLIENT_SECRET}).factory(j+".securityInterceptor",v["default"]).factory(j+".localeInterceptor",m["default"]).factory(j+".deleteRequestInterceptor",b["default"]),t.exports={MODULE_NAME:j}},{"./controller/LoginController.js":22,"./interceptor/DeleteRequestInterceptor.js":23,"./interceptor/LocaleInterceptor.js":24,"./interceptor/SecurityInterceptor.js":25,"./resource/OAuthResource.js":26,"./service/Authorization.js":28,"./service/Security.js":29,"./service/TokenStorage.js":30}],28:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){var t=a.isAuthenticated();return e&&e.length>0&&!a.hasAnyRole(e)&&!t}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=void 0,s=void 0,u=function(){function e(t,r){n(this,e),a=t,s=r}return o(e,[{key:"authorize",value:function(e){return a.getUser().then(function(){i(e)&&s.go("signIn")})}}]),e}();r["default"]=u},{}],29:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(){function e(t,r,i,o,a,s){n(this,e),this.q=t,this.timeout=r,this.user=void 0,this.authenticated=!1,this.tokenStorage=i,this.userResource=o,this.oauthResource=a,this.translate=s,this.checked=!1}return i(e,[{key:"isAuthenticated",value:function(){return this.authenticated}},{key:"isChecked",value:function(){return this.checked}},{key:"isSuperAdmin",value:function(){return this.user.roles.indexOf("ROLE_SUPER_ADMIN")!==-1}},{key:"hasRole",value:function(e){return!(!this.authenticated||void 0===e)&&(this.user.roles.indexOf(e)!==-1||this.isSuperAdmin())}},{key:"hasAnyRole",value:function(e){if(!this.authenticated||void 0===e)return!1;for(var t=0;t<e.length;t++)if(this.hasRole(e[t]))return!0;return!1}},{key:"authenticate",value:function(e){this.user=e,this.authenticated=!0,this.translate.use(e.language)}},{key:"logout",value:function(){var e=this,t=this.q.defer();return this.oauthResource.logout().then(function(){e.user=void 0,e.authenticated=!1,e.tokenStorage.removeItem(),t.resolve()},function(e){t.reject(e)}),t.promise}},{key:"getUser",value:function(e){var t=this.q.defer();return e&&this.reloadUser(),void 0!==this.user?(t.resolve(this.user),this.authenticate(this.user),t.promise):(void 0!==this.tokenStorage.getItem()?this.isAuthenticated()||this.reloadUser():(this.checked=!0,t.reject()),t.promise)}},{key:"reloadUser",value:function(){var e=this,t=this.q.defer();this.userResource.getMe().then(function(r){e.checked=!0,e.authenticate(r),t.resolve(e.user)},function(){e.checked=!0})}}]),e}();r["default"]=o},{}],30:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=void 0,a=function(){function e(t){n(this,e),o=t}return i(e,[{key:"getItem",value:function(){var e=o.accessToken;return void 0!==e&&(e=JSON.parse(e)),e}},{key:"getToken",value:function(){var t=this.getItem();return e.capitalizeFirstLetter(t.tokenType)+" "+t.accessToken}},{key:"addItem",value:function(e){return o.accessToken=JSON.stringify(e),e}},{key:"removeItem",value:function(){o.removeItem("accessToken")}}],[{key:"capitalizeFirstLetter",value:function(e){return e.charAt(0).toUpperCase()+e.slice(1)}}]),e}();r["default"]=a},{}],31:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function o(){n(this,o),this.accessToken=void 0,this.expiresIn=void 0,this.tokenType=void 0,this.scope=void 0,this.refreshToken=void 0};r["default"]=i},{}],32:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){for(var t=[],r=0;r<e.length;r++)d.indexOf(e[r].type)!==-1&&t.push(e[r]);return t}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a="Tags",s="async",u="sync",c=0,l=4,f=5,d=[c,l,f],h=function(){function e(t,r,i,o,u,c,l,f,d,h,p,v,g,m){var y=this;n(this,e),this.alert=c,this.state=o,this.scope=l,this.stateParams=u,this.triggerResource=r,this.TableParams=d,this.paramConverter=h,this.currentContainer=p,this.tag=t.getEntityObject(),this.tagPromise=void 0,this.triggers=[],this.chosenTriggers=[],this.triggerPromise=void 0,this.displayStepsAfterFirst=!1,this.templatesStorage=g,this.synchronousTemplates=[],this.asynchronousTemplates=[],this.triggersWhenTagIsAsync=[],this.scope.tagTemplateTab=s,this.divideTemplatesBasedOnSynchronicity(f),this.template=void 0,this.translate=m,this.variables=[],this.textEditorConfig={},this.isCodeEditorFocused=!1,i.queryAllAvailable(this.stateParams.containerId).then(function(e){y.variables=e.data}),this.textEditorConfig.onLoad=function(e){e.options.variables=y.variables,l.insertVariableIntoCode=function(t){e.doc.replaceSelection("{{ "+t.name+" }}"),e.focus()},e.on("focus",function(){y.isCodeEditorFocused=!0}),e.on("blur",function(){y.isCodeEditorFocused=!1})},l.$on("trigger.add",function(e,t){y.tag.addTrigger(t),y.showTriggerForm=!1,y.validateTriggers=!1}),l.$on("trigger.edit",function(e,t){y.tag.editTrigger(t),y.editTriggerForm=!1,y.validateTriggers=!1}),this.translate(["Place the code"]).then(function(e){y.textEditorConfig.placeholder=e["Place the code"]}),this.currentContainer.getContainer().then(function(){y.currentContainer.$container.hasPermission("noaccess")&&o.go("container"),y.translate([y.getBreadcrumbText(),a]).then(function(e){v.clear().add(y.currentContainer.$container.name,"tags",{containerId:y.currentContainer.$container.id}).add(e[a],"tags",{containerId:y.currentContainer.$container.id}).add(e[y.getBreadcrumbText()]).broadcast()})}),l.$on("pageInfo.reload",function(e,t){y.translate([y.getBreadcrumbText(),a]).then(function(e){v.clear().add(t.name,"tags",{containerId:t.id}).add(e[a],"tags",{containerId:t.id}).add(e[y.getBreadcrumbText()]).broadcast()})})}return o(e,[{key:"divideTemplatesBasedOnSynchronicity",value:function(e){for(var t=this,r=this.templatesStorage.getAll(),n=function(e){e.isSynchronous?t.synchronousTemplates.push(e):t.asynchronousTemplates.push(e)},i=function(t){e(function(){return n(t)},0)},o=0;o<r.length;o++)i(r[o]);this.templatesStorage.setListener(i)}},{key:"hasVariables",value:function(){var e=angular.isArray(this.variables)&&this.variables.length>0;return!this.isTagTemplateTabActive(u)&&e}},{key:"setTagTemplateTab",value:function(e,t){e!==this.scope.tagTemplateTab&&(t||this.deselectCurrentTemplate(),this.scope.tagTemplateTab=e,this.tag.isSynchronous=this.isTagTemplateTabActive(u),this.rememeberCurrentTriggers(),this.isTagTemplateTabActive(u)?(this.documentWirteWhenTagIsAsync=this.tag.documentWrite,this.tag.documentWrite=!0):this.tag.documentWrite=this.documentWirteWhenTagIsAsync)}},{key:"rememeberCurrentTriggers",value:function(){this.isTagTemplateTabActive(u)?(this.triggersWhenTagIsAsync=this.tag.triggers||[],this.tag.triggers=i(this.triggersWhenTagIsAsync)):this.tag.triggers=this.triggersWhenTagIsAsync}},{key:"hasTriggersNotAssignableToSyncTags",value:function(){var e=this.triggersWhenTagIsAsync||[],t=i(e);return t.length!==e.length}},{key:"isTagTemplateTabActive",value:function(e){return e===this.scope.tagTemplateTab}},{key:"currentTemplateAllowsToSetRVP",value:function(){var e=this.hasSelectedPluginTemplate()&&this.template.isTracking;return this.hasSelectedCustomTemplate()||e}},{key:"setTagTemplate",value:function(e){var t=this.tag.template===e;if(t)return this.deselectCurrentTemplate(),!1;if(this.tag.template=e,this.hasSelectedPluginTemplate()){this.template=this.templatesStorage.get(e),this.tag.code=void 0;var r=0!==this.template.types.length;r?this.displayStepsAfterFirst=!1:this.setTemplateType(e),this.tag.respectVisitorsPrivacy=this.template.isTracking}else this.displayStepsAfterFirst=!0,this.tag.respectVisitorsPrivacy=this.isTagTemplateTabActive(s)}},{key:"initTagTemplate",value:function(e,t){this.tag.template=e,this.setTagTemplateTab(this.tag.isSynchronous?u:s,!0),this.hasSelectedPluginTemplate()&&(this.template=this.templatesStorage.get(e),this.tag.code=void 0,0===this.template.types.length?(this.tag.templateOptions=t,this.templateFields=this.templatesStorage.getOptions(e),this.template.templateUrl=this.templatesStorage.getTemplateUrl(e)):(this.tag.templateOptions.type=t.type,this.templateFields=this.templatesStorage.getOptions(e,t.type),this.template.templateUrl=this.templatesStorage.getTemplateUrl(e,t.type))),this.displayStepsAfterFirst=!0}},{key:"setTemplateType",value:function(e,t){var r=void 0!==this.tag.templateOptions.type&&this.tag.templateOptions.type===t;return!r&&(this.templateFields=this.templatesStorage.getOptions(e,t),this.setOptions(),this.tag.templateOptions.type=t,this.template.templateUrl=this.templatesStorage.getTemplateUrl(e,t),void(this.displayStepsAfterFirst=!0))}},{key:"setOptions",value:function(){var e=this.templateFields.length;for(this.tag.templateOptions={};e--;)this.tag.templateOptions[this.templateFields[e].name]=this.templateFields[e].value}},{key:"showExistingTriggers",value:function(){this.chosenTriggers=[],this.prepareExistingTriggersList(),this.showListTriggersForm=!0}},{key:"showAddNewTriggerForm",value:function(){this.validateTriggers=!1,this.showTriggerForm=!0}},{key:"prepareExistingTriggersList",value:function(){var e=this;this.triggers=[],this.types=["Page View","Click","Event","Form submission"],this.existingTable=new this.TableParams({page:1,count:10,sorting:{name:"asc"}},{total:0,getData:function(t,r){var n=e.paramConverter.list(r.url());n["exclude[]"]=e.tag.triggers.map(function(e){return e.id}),n["types[]"]=e.isTagTemplateTabActive(u)?d:[],e.triggerResource.query(e.currentContainer.$container.id,n).then(function(e){r.total(e.total),t.resolve(e.data)})}})}},{key:"addExistingTriggers",value:function(){for(var e=this.chosenTriggers.length;e--;)this.tag.triggers.push(this.chosenTriggers[e])}},{key:"submitForm",value:function(e){var t=this;this.tagPromise=e.save(this.stateParams.containerId),this.tagPromise.then(function(){t.alert.success(t.getAlertType(t.stateParams.tagId)),t.currentContainer.makeChanges(),t.state.go("tags",{containerId:t.stateParams.containerId})},function(){t.alert.error("error.invalid")})}},{key:"displayInvalidFormMessage",value:function(){this.validateTag=!0,this.alert.error("error.invalid")}},{key:"deselectCurrentTemplate",value:function(){this.template=void 0,this.tag.template=null,this.displayStepsAfterFirst=!1,this.editTriggerForm=!1,this.showTriggerForm=!1,this.showListTriggersForm=!1}},{key:"hasSelectedTemplate",value:function(){return null!==this.tag.template}},{key:"hasSelectedCustomTemplate",value:function(){return this.hasSelectedTemplate()&&void 0===this.tag.template}},{key:"hasSelectedPluginTemplate",value:function(){return this.hasSelectedTemplate()&&!this.hasSelectedCustomTemplate()}}]),e}();r["default"]=h},{}],33:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=e("./BaseController.js"),c=n(u),l=function(e){function t(e,r,n,a,s,u,c,l,f,d,h,p,v,g){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r,n,a,s,u,c,l,f,d,h,p,v,g))}return a(t,e),s(t,[{key:"getBreadcrumbText",value:function(){return"Add a new tag"}},{key:"getAlertType",value:function(){return"success.create"}}]),t}(c["default"]);r["default"]=l},{"./BaseController.js":32}],34:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=e("./BaseController.js"),c=n(u),l=function(e){function t(e,r,n,a,s,u,c,l,f,d,h,p,v,g){i(this,t);var m=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r,n,a,s,u,c,l,f,d,h,p,v,g));return m.tagPromise=e.get(s.tagId),m.tagPromise.then(function(e){m.tag=e,m.initTagTemplate(m.tag.template,m.tag.templateOptions)}),m}return a(t,e),s(t,[{key:"getBreadcrumbText",value:function(){return"Configure tag"}},{key:"getAlertType",value:function(){return"success.edit"}}]),t}(c["default"]);r["default"]=l},{"./BaseController.js":32}],35:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=void 0,a=void 0,s=void 0,u="Tags",c=function(){function e(t,r,i,c,l,f,d,h,p,v,g){var m=this;n(this,e),o=l,a=r,s=p,this.permissions=[],this.containerId=a.containerId,this.translate=g,this.currentContainer=d,this.publishedStatus=c,this.currentContainer.getContainer().then(function(e){m.currentContainer.$container.hasPermission("view")?m.permissions=m.currentContainer.$container.permissions:v.go("container"),m.translate([u]).then(function(t){h.clear().add(e.name,"tags",{containerId:e.id}).add(t[u]).broadcast()})}),this.tableParams=new t({page:1,count:10,sorting:{name:"asc"}},{total:0,$scope:p,getData:function(e,t){i.query(a.containerId,f.list(t.url())).then(function(r){t.total(r.total),e.resolve(r.data)})}}),this.tableParams.reload(),s.params=this.tableParams,this.addReloadOnPublishListener(p),p.$on("ngTableAfterReloadData",function(){m.showTriggers=-1,m.showMenu=-1},!0),p.$watch("params.$params",function(e,t){e!==t&&(p.params.settings().$scope=p,p.params.reload())},!0),s.$on("pageInfo.reload",function(e,t){m.translate([u]).then(function(e){h.clear().add(t.name,"tags",{containerId:t.id}).add(e[u]).broadcast()})})}return i(e,[{key:"addReloadOnPublishListener",value:function(e){var t=e.$on("container-published",function(){e.params.reload()});e.$on("$destroy",function(){t()})}},{key:"removeTag",value:function(e){var t=this;e.remove().then(function(){o.success("success.remove"),t.currentContainer.makeChanges(),1===t.tableParams.data.length&&t.tableParams.page()>1?t.tableParams.page(t.tableParams.page()-1):t.tableParams.reload()},function(){o.error("error.remove"),t.tableParams.reload()})}},{key:"changeStatus",value:function(e){var t=this;e.changeStatus(this.containerId).then(function(){t.currentContainer.makeChanges(),o.success("status.change")},function(){o.error("status.failed")})}},{key:"getPublishedStatus",value:function(e){return this.publishedStatus.getPublishedStatusForTag(e)}},{key:"toggleActionMenu",value:function(e){this.permissions.indexOf("edit")!==-1&&(this.showMenu=this.showMenu===e?-1:e,this.showTriggers=-1)}},{key:"toggleTriggerList",value:function(e){this.showMenu=-1,this.showTriggers=this.isRowExpanded(e)?-1:e}},{key:"isRowExpanded",value:function(e){return this.showTriggers===e}}]),e}();r["default"]=c},{}],36:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(e){var t=function(){function t(){n(this,t),this.id=void 0,this.name=void 0,this.code=void 0,this.triggers=[],this.updatedAt=void 0,this.priority=0,this.documentWrite=!1,this.disableInDebugMode=!1,this.respectVisitorsPrivacy=!1,this.isSynchronous=!1,this.isActive=!0,this.template=null,this.templateOptions={},this.statusChangePending=!1}return i(t,[{key:"addTrigger",value:function(e){this.triggers.push(e)}},{key:"editTrigger",value:function(e){for(var t=this.triggers.length;t--;)if(this.triggers[t].id===e.id)return this.triggers[t]=e,!0;return!1}},{key:"removeTrigger",value:function(e){var t=this.triggers.indexOf(e);return t>-1&&(this.triggers.splice(t,1),!0)}},{key:"removeTriggerById",value:function(e){for(var t=this.triggers.length;t--;)if(this.triggers[t].id===e)return this.triggers.splice(t,1),!0;return!1}},{key:"save",value:function(t){var r,n={},i=["id","updatedAt","createdAt","statusChangePending"];void 0===this.template?i.push("templateOptions"):(i.push("code"),i.push("documentWrite"));for(var o in this)if(!angular.isFunction(this[o])&&this.hasOwnProperty(o)&&i.indexOf(o)===-1)if("triggers"===o){var a=[];for(var s in this[o])this[o][s]instanceof Object&&a.push(this[o][s].id);n[o]=a}else n[o]=this[o];return r=void 0===this.id?e.post(t,n):e.put(this.id,n)}},{key:"remove",value:function(){return void 0!==this.id&&e["delete"](this.id)}},{key:"changeStatus",value:function(e){var t=this,r=angular.copy(this);r.isActive=!r.isActive,this.statusChangePending=!0;var n=r.save(e).then(function(e){t.isActive=!t.isActive,t.updatedAt=e.updatedAt})["finally"](function(){t.statusChangePending=!1});return n}}]),t}();return t};r["default"]=o},{}],37:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=e("../entity/TemplateType.js"),s=n(a),u=function(){var e=(0,s["default"])(),t=function(){function t(e,r){i(this,t),this.id=e,this.name=r,this.brandUrl=void 0,this.templateUrl=void 0,this.type=void 0,this.types=[],this.fields=[],this.isSynchronous=!1,this.isTracking=!0}return o(t,[{key:"addTextField",value:function(e){var t=e?e:{};return t.type="text",this.fields.push(t),this}},{key:"addHiddenField",value:function(e,t){var r={};return r.name=e,r.value=t,r.type="hidden",this.fields.push(r),this}},{key:"addSelectField",value:function(e){var t=e?e:{};return t.type="select",this.fields.push(t),this}},{key:"addType",value:function(t,r){var n=new e(t,r);return this.types.push(n),n}},{key:"addBrand",value:function(e){return this.brandUrl=e,this}},{key:"addTemplateUrl",value:function(e){return this.templateUrl=e,this}},{key:"setSynchronous",value:function(e){return this.isSynchronous=e,this}},{key:"setTracking",value:function(e){return this.isTracking=e,this}}]),t}();return t};r["default"]=u},{"../entity/TemplateType.js":38}],38:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(){var e=function(){function e(t,r){n(this,e),this.id=t,this.name=r,this.templateUrl=void 0,this.fields=[]}return i(e,[{key:"addTextField",value:function(e){var t=e?e:{};return t.type="text",this.fields.push(t),this}},{key:"addHiddenField",value:function(e,t){var r={};return r.name=e,r.value=t,r.type="hidden",this.fields.push(r),this}},{key:"addTemplateUrl",value:function(e){return this.templateUrl=e,this}}]),e}();return e};r["default"]=o},{}],39:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=e("../entity/Template.js"),s=n(a),u=(0,s["default"])(),c=function(){function e(){i(this,e),this.collection=[],this.onAddListener}return o(e,[{key:"setListener",value:function(e){this.onAddListener=e}},{key:"add",value:function(e,t){var r=new u(e,t);return this.collection.push(r),this.onAddListener&&this.onAddListener(r),r}},{key:"get",value:function(e){for(var t=this.collection.length;t--;)if(this.collection[t].id===e)return this.collection[t];return!1}},{key:"getAll",value:function(){return this.collection}},{key:"$get",value:function(){return this}}]),e}();r["default"]=c},{"../entity/Template.js":37}],40:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=e("../entity/Tag.js"),s=n(a),u=function(e){var t=(0,s["default"])(this),r=new t;r.id=e.id,r.name=e.name,r.code=e.code,r.priority=e.priority,r.updatedAt=e.updated_at,r.createdAt=e.created_at,r.documentWrite=e.document_write,r.disableInDebugMode=e.disable_in_debug_mode,r.isActive=e.is_active,r.respectVisitorsPrivacy=e.respect_visitors_privacy,r.isSynchronous=e.is_synchronous,null!==e.template?(r.template=e.template,r.templateOptions=e.template_options):r.template=void 0;for(var n in e.triggers)e.triggers[n]instanceof Object&&r.addTrigger(e.triggers[n]);return r},c=function(e,t){return e=angular.isArray(e)?e:[e],e.concat(t)},l=function(){function e(t,r){i(this,e),this.http=t,this.q=r}return o(e,[{key:"getEntityObject",value:function(){var e=(0,s["default"])(this);return new e}},{key:"get",value:function(e){var t=this,r=this.q.defer();return this.http({method:"GET",url:"/api/tags/"+e,transformResponse:c(this.http.defaults.transformResponse,function(e,r,n){return n<400?u.call(t,e.data):e})}).success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise}},{key:"query",value:function(e,t){var r=this,n=this.q.defer();return this.http({method:"GET",url:"/api/containers/"+e+"/tags",params:t,transformResponse:c(this.http.defaults.transformResponse,function(e){for(var t in e.data)e.data[t]instanceof Object&&(e.data[t]=u.call(r,e.data[t]));return e})}).success(function(e){n.resolve(e)}).error(function(e){n.reject(e)}),n.promise}},{key:"delete",value:function(e){var t=this.q.defer();return this.http({method:"DELETE",url:"/api/tags/"+e}).success(function(e){t.resolve(e)}).error(function(e){t.reject(e)}),t.promise}},{key:"post",value:function(e,t){var r=this,n=this.q.defer();return this.http({method:"POST",url:"/api/containers/"+e+"/tags",data:t,transformResponse:c(this.http.defaults.transformResponse,function(e,t,n){return n<400?u.call(r,e.data):e})}).success(function(e){n.resolve(e)}).error(function(e){n.reject(e)}),n.promise}},{key:"put",value:function(e,t){var r=this,n=this.q.defer();return this.http({method:"PUT",url:"/api/tags/"+e,data:t,transformResponse:c(this.http.defaults.transformResponse,function(e,t,n){
return n<400?u.call(r,e.data):e})}).success(function(e){n.resolve(e)}).error(function(e){n.reject(e)}),n.promise}}]),e}();r["default"]=l},{"../entity/Tag.js":36}],41:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(e,t,r){for(var n=e.length;n--;)if(e[n][t]===r)return e[n];return!1},a=function(){function e(t){n(this,e),this.templatesService=t,this.collection=this.templatesService.getAll()}return i(e,[{key:"setListener",value:function(e){this.templatesService.setListener(e)}},{key:"getAll",value:function(){return this.collection}},{key:"get",value:function(e){for(var t=this.collection.length;t--;)if(this.collection[t].id===e)return this.collection[t];return!1}},{key:"getOptions",value:function(e,t){var r=o(this.collection,"id",e);if(r){if(t){var n=o(r.types,"id",t);return!(!n||!n.hasOwnProperty("fields"))&&n.fields}return!!r.hasOwnProperty("fields")&&r.fields}return!1}},{key:"getTemplateUrl",value:function(e,t){var r=o(this.collection,"id",e);if(t){var n=o(r.types,"id",t);return!!n&&n.templateUrl}return r.templateUrl}}]),e}();r["default"]=a},{}],42:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var i=e("./controllers/CreateController.js"),o=n(i),a=e("./controllers/EditController.js"),s=n(a),u=e("./controllers/ManageController.js"),c=n(u),l=e("./resource/TagResource.js"),f=n(l),d=e("./services/Templates.js"),h=n(d),p=e("./providers/TemplatesProvider.js"),v=n(p),g="clearcode.tm.tag",m="clearcode.tm.trigger",y="clearcode.tm.variable",b="clearcode.tm.tagContainer",j="app/modules/tag";h["default"].$inject=[g+".$template"],f["default"].$inject=["$http","$q"],c["default"].$inject=["ngTableParams","$stateParams",g+".tagResource",b+".publishedStatus","clearcode.tm.alert.alert",b+".paramConverter",b+".currentContainer","clearcode.tm.pageInfo.pageInfo","$scope","$state","$translate"],o["default"].$inject=[g+".tagResource",m+".triggerResource",y+".variableResource","$state","$stateParams","clearcode.tm.alert.alert","$scope","$timeout","ngTableParams",b+".paramConverter",b+".currentContainer","clearcode.tm.pageInfo.pageInfo",g+".templatesStorage","$translate"],s["default"].$inject=[g+".tagResource",m+".triggerResource",y+".variableResource","$state","$stateParams","clearcode.tm.alert.alert","$scope","$timeout","ngTableParams",b+".paramConverter",b+".currentContainer","clearcode.tm.pageInfo.pageInfo",g+".templatesStorage","$translate"],t.exports={MODULE_NAME:g},angular.module(g,["pascalprecht.translate","ui.router","ngTable","clearcode.tm.alert","clearcode.tm.pageInfo","clearcode.tm.tagContainer","clearcode.tm.trigger","ui.codemirror"]).config(["$stateProvider",function(e){e.state("tags",{url:"/containers/{containerId}/tags",controller:g+".ManageController as view",templateUrl:j+"/views/manage.html",data:{roles:["ROLE_SUPER_ADMIN"],hasContainerList:!0}}).state("tagCreate",{url:"/containers/{containerId}/tag-create",controller:g+".CreateController as view",templateUrl:j+"/views/create.html",data:{roles:["ROLE_SUPER_ADMIN"],hasContainerList:!0}}).state("tagEdit",{url:"/containers/{containerId}/tag/edit/{tagId}",controller:g+".EditController as view",templateUrl:j+"/views/edit.html",data:{roles:["ROLE_SUPER_ADMIN"],hasContainerList:!0}})}]).run(["clearcode.tm.alert.$alert",function(e){e.addMessagePattern("trigger.close","You are trying to close unsaved trigger."),e.addMessagePattern("status.change","Tag status was changed successfully"),e.addMessagePattern("status.failed","Sorry, something went wrong.")}]).provider(g+".$template",v["default"]).controller(g+".ManageController",c["default"]).controller(g+".CreateController",o["default"]).controller(g+".EditController",s["default"]).service(g+".tagResource",f["default"]).service(g+".templatesStorage",h["default"])},{"./controllers/CreateController.js":33,"./controllers/EditController.js":34,"./controllers/ManageController.js":35,"./providers/TemplatesProvider.js":39,"./resource/TagResource.js":40,"./services/Templates.js":41}],43:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=void 0,a=void 0,s="Add a container",u=function(){function e(t,r,i,u,c){n(this,e),o=r,a=i,this.container=t.getEntityObject(),this.translate=c,this.translate([s]).then(function(e){u.clear().add(e[s]).broadcast()})}return i(e,[{key:"submitForm",value:function(e){this.containerPromise=e.save(),this.containerPromise.then(function(e){a.success("container.create"),o.go("containerExplanation",{containerId:e.id})},function(){a.error("error.invalid")})}},{key:"displayInvalidFormMessage",value:function(){this.validateContainer=!0,a.error("error.invalid")}}]),e}();r["default"]=u},{}],44:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=void 0,a=void 0,s=void 0,u=void 0,c=void 0,l="Options",f=function(){function e(t,r,i,f,d,h,p,v){var g=this;n(this,e),o=r,a=i,s=f,u=d,c=p,this.pageInfo=h,this.container=t.getEntityObject(),this.containerPromise=t.get(a.containerId),this.containerPromise.then(function(e){g.container=e}),this.translate=v,u.getContainer().then(function(){u.$container.hasPermission("noaccess")&&o.go("container"),g.refreshBreadcrumb(l,u.$container)}),c.$on("pageInfo.reload",function(e,t){g.refreshBreadcrumb(l,t)})}return i(e,[{key:"removeContainer",value:function(){this.container.remove().then(function(){s.success("success.remove"),o.go("container")},function(){s.error("error.remove")})}},{key:"submitForm",value:function(e){var t=this;this.containerPromise=e.save(),this.containerPromise.then(function(e){t.refreshBreadcrumb(l,e),u.get(a.containerId),s.success("success.edit"),o.go("containerEdit",{containerId:a.containerId})},function(){s.error("error.invalid")})}},{key:"displayInvalidFormMessage",value:function(){this.validateContainer=!0,s.error("error.invalid")}},{key:"refreshBreadcrumb",value:function(e,t){var r=this.pageInfo;this.translate([e]).then(function(n){r.clear().add(t.name,"tags",{containerId:t.id}).add(n[e]).broadcast()})}}]),e}();r["default"]=f},{}],45:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=void 0,o="Container created successfully",a=function s(e,t,r,a,u){var c=this;n(this,s),i=t,this.translate=u,a.makeChanges(),this.translate([o]).then(function(e){r.clear().add(e[o]).broadcast()}),this.container=e.getEntityObject(),this.containerPromise=e.get(i.containerId),this.containerPromise.then(function(e){c.container=e})};r["default"]=a},{}],46:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=500,a=void 0,s=void 0,u=function(){function e(t,r,i,o,u,c,l,f){var d=this;n(this,e),a=c,s=i,this.publishedStatus=u,f.disableDebugMode(),this.currentFilterQuery="",this.filterQuery="",this.tableParams=new t({page:1,count:10,sorting:{name:"asc"}},{total:0,getData:function(e,t){var r=l.list(t.url());d.useSearchByName()&&(r.name=d.currentFilterQuery),o.query(r).then(function(r){t.total(r.total),e.resolve(r.data),d.filterQuery=d.currentFilterQuery})}}),r.$on("$destroy",function(){s.cancel(d.debounce)})}return i(e,[{key:"removeContainer",value:function(e){var t=this;e.remove().then(function(){a.success("success.remove"),1===t.tableParams.data.length&&t.tableParams.page(t.tableParams.page()-1),t.tableParams.reload()},function(){a.error("error.remove"),t.tableParams.reload()})}},{key:"getPublishedStatus",value:function(e){return this.publishedStatus.getPublishedStatusForContainer(e)}},{key:"search",value:function(){this.tableParams.page(1),this.tableParams.reload()}},{key:"searchDebounced",value:function(){var e=this;s.cancel(this.debounce);var t=function(){e.search()};this.currentFilterQuery!==this.filterQuery&&(this.debounce=s(t,o))}},{key:"resetSearchQuery",value:function(){this.currentFilterQuery="",this.search()}},{key:"showSearchLoader",value:function(){return this.currentFilterQuery!==this.filterQuery}},{key:"useSearchByName",value:function(){return void 0!==this.currentFilterQuery&&this.currentFilterQuery.length>0}}]),e}();r["default"]=u},{}],47:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=void 0,a=void 0,s=void 0,u=function(){function e(t,r,i,u,c){n(this,e),this.permissionsPromise=void 0,o=c,a=i,s=u,this.usersTable=new t({page:1,count:10,sorting:{name:"asc"}},{total:0,getData:function(e,t){o.query(a.$container.id,r.list(t.url())).then(function(r){t.total(r.total),e.resolve(r.data)})}})}return i(e,[{key:"setPermission",value:function(e,t){var r=angular.copy(e);r.permissions=t,this.permissionsPromise=r.save(a.$container.id),this.permissionsPromise.then(function(t){e.permissions=t.permissions},function(){s.error("permissions.error")})}},{key:"isValid",value:function(e,t){return e.permissions!==t&&e.user.roles.indexOf("ROLE_SUPER_ADMIN")===-1}}]),e}();r["default"]=u},{}],48:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function o(e,t){var r=this;n(this,o),this.privacyPromise=t.getPrivacyOptOut(e.containerId).then(function(e){r.code=e.code})};r["default"]=i},{}],49:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(e){var t=function(){function t(){n(this,t),this.id,this.name,this.code,this.codeSynchronous,this.version,this.hasUnpublishedChanges,this.publishedAt,this.permissions,this.delay,this.websites}return i(t,[{key:"save",value:function(){var t,r={},n=["id","code","codeSynchronous","version","hasUnpublishedChanges","publishedAt","permissions","websites"];for(var i in this)!angular.isFunction(this[i])&&this.hasOwnProperty(i)&&n.indexOf(i)===-1&&(r[i]=this[i]);return void 0===this.id?(delete r.delay,t=e.post(r)):t=e.put(this.id,r),t}},{key:"remove",value:function(){return void 0!==this.id&&e["delete"](this.id)}},{key:"hasPermission",value:function(e){return this.permissions.indexOf(e)!==-1}},{key:"getPermission",value:function(){var e=[{value:"operator",text:"Owner"},{value:"publish",text:"Publish"},{value:"edit",text:"Edit"},{value:"view",text:"View"}];for(var t in e)if(this.permissions.indexOf(e[t].value)!==-1)return e[t].text}}]),t}();return t};r["default"]=o},{}],50:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(e){var t=function(){function t(){n(this,t),this.user,this.permissions}return i(t,[{key:"save",value:function(t){var r=void 0,n=void 0;return r=angular.copy(this),r.user=r.user.id,n=e.put(t,r)}}]),t}();return t};r["default"]=o},{}],51:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=e("../entity/Container.js"),s=n(a),u=function(e){var t=(0,s["default"])(this),r=new t;if(void 0!==e){r.id=e.id,r.name=e.name,r.description=e.description,r.code=e.code,r.codeSynchronous=e.code_synchronous,r.version=e.version,r.hasUnpublishedChanges=e.has_unpublished_changes,r.publishedAt=e.published_at,r.permissions=e.permissions,r.delay=e.delay,r.websites=[];for(var n=0;n<e.websites.length;n++){var i=this.WebsiteResource.getEntityObject();i.url=e.websites[n].url,i.parameterType=e.websites[n].parameter_type,r.websites.push(i)}}return r},c=function(e,t){return e=angular.isArray(e)?e:[e],e.concat(t)},l=function(){function e(t,r,n){i(this,e),this.http=t,this.q=r,this.WebsiteResource=n}return o(e,[{key:"getEntityObject",value:function(){var e=(0,s["default"])(this);return new e}},{key:"get",value:function(e){var t=this,r=this.q.defer();return this.http({method:"GET",url:"/api/containers/"+e,transformResponse:c(this.http.defaults.transformResponse,function(e){return u.call(t,e.data)})}).success(function(e){r.resolve(e)}).error(function(){r.reject()}),r.promise}},{key:"query",value:function(e){var t=this,r=this.q.defer();return this.http({method:"GET",url:"/api/containers",params:e,transformResponse:c(this.http.defaults.transformResponse,function(e){for(var r in e.data)e.data[r]instanceof Object&&(e.data[r]=u.call(t,e.data[r]));return e})}).success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise}},{key:"delete",value:function(e){var t=this.q.defer();return this.http({method:"DELETE",url:"/api/containers/"+e}).success(function(e){t.resolve(e)}).error(function(e){t.reject(e)}),t.promise}},{key:"post",value:function(e){var t=this,r=this.q.defer();return this.http({method:"POST",url:"/api/containers",data:e,transformResponse:c(this.http.defaults.transformResponse,function(e){return u.call(t,e.data)})}).success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise}},{key:"put",value:function(e,t){var r=this,n=this.q.defer();return this.http({method:"PUT",url:"/api/containers/"+e,data:t,transformResponse:c(this.http.defaults.transformResponse,function(e){return u.call(r,e.data)})}).success(function(e){n.resolve(e)}).error(function(e){n.reject(e)}),n.promise}},{key:"publishVersion",value:function(e){var t=this.q.defer();return this.http({method:"POST",url:"/api/containers/"+e+"/version-publish"}).success(function(e){t.resolve(e)}).error(function(e){t.reject(e)}),t.promise}},{key:"restoreVersion",value:function(e){var t=this.q.defer();return this.http({method:"POST",url:"/api/containers/"+e+"/version-restore"}).success(function(e){t.resolve(e)}).error(function(e){t.reject(e)}),t.promise}},{key:"getPrivacyOptOut",value:function(e){var t=this.q.defer();return this.http({method:"GET",url:"containers/"+e+"/privacy"}).success(function(e){t.resolve(e)}).error(function(e){t.reject(e)}),t.promise}}]),e}();r["default"]=l},{"../entity/Container.js":49}],52:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=e("../entity/Permission.js"),s=n(a),u=function(e){var t=["operator","publish","edit","view","noaccess"],r=(0,s["default"])(this),n=new r;if(n.user=e.user,e.permissions instanceof Object){for(var i in t)if(e.permissions.indexOf(t[i])!==-1){n.permissions=t[i];break}}else n.permissions=e.permissions;return n},c=function(e,t){return e=angular.isArray(e)?e:[e],e.concat(t)},l=function(){function e(t,r){i(this,e),this.http=t,this.q=r}return o(e,[{key:"getEntityObject",value:function(){var e=(0,s["default"])(this);return new e}},{key:"query",value:function(e,t){var r=this,n=this.q.defer();return this.http({method:"GET",url:"/api/containers/"+e+"/permissions",params:t,transformResponse:c(this.http.defaults.transformResponse,function(e){for(var t in e.data)e.data[t]instanceof Object&&(e.data[t]=u.call(r,e.data[t]));return e})}).success(function(e){n.resolve(e)}).error(function(e){n.reject(e)}),n.promise}},{key:"put",value:function(e,t){var r=this,n=this.q.defer();return this.http({method:"PUT",data:t,url:"api/containers/"+e+"/permissions",transformResponse:c(this.http.defaults.transformResponse,function(e,t,n){return n<400?u.call(r,e.data):e})}).success(function(e){n.resolve(e)}).error(function(e){n.reject(e)}),n.promise}}]),e}();r["default"]=l},{"../entity/Permission.js":50}],53:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=void 0,a=void 0,s=void 0,u=void 0,c=void 0,l=void 0,f=void 0,d="preview",h="debug",p=function(){function e(t,r,i,d,h,p,v,g){n(this,e),o=t,a=r,s=i,u=d,c=h,this.$container=void 0,l=p,this.types=void 0,this.debugMode=!1,this.previewedContainer=void 0,this.translate=g,f=v}return i(e,[{key:"get",value:function(e){var t=this;return e=this.getId(e),c.currentContainerLoading=!0,this.containerPromise=a.get(e).then(function(e){return t.$container=e,c.currentContainerLoading=!1,t.verifyDebugMode(),void 0===t.types&&(t.types=t.setTypes()),t.$container}),this.containerPromise}},{key:"getId",value:function(e){return void 0!==e?e:o.containerId}},{key:"getContainer",value:function(){var e=void 0;return e=void 0===this.containerPromise?this.get():this.containerPromise}},{key:"publish",value:function(){var e=this,t=a.publishVersion(this.getId());return c.currentContainerLoading=!0,t.then(function(){s.success("success.publish"),c.currentContainerLoading=!1,e.get().then(function(){c.$broadcast("container-published",e)})},function(){s.error("container.error"),c.currentContainerLoading=!1})}},{key:"canRestore",value:function(){return!!this.$container&&(this.$container.publishedAt&&this.$container.hasUnpublishedChanges)}},{key:"isDirty",value:function(){return this.$container&&this.$container.hasUnpublishedChanges}},{key:"isPublished",value:function(){return!!this.$container&&(this.$container.publishedAt&&!this.$container.hasUnpublishedChanges)}},{key:"makeChanges",value:function(){return!!this.$container&&(this.$container.hasUnpublishedChanges=!0)}},{key:"restore",value:function(){var e=this,t=a.restoreVersion(this.getId());c.currentContainerLoading=!0,t.then(function(){s.success("success.restore"),e.get();var t=u.includes("tags")||u.includes("tagEdit")||u.includes("tagCreate"),r=u.includes("triggers")||u.includes("triggerCreate")||u.includes("triggerEdit");t?u.go("tags",{containerId:e.getId()},{reload:!0}):r?u.go("triggers",{containerId:e.getId()},{reload:!0}):u.go("containerEdit",{containerId:e.getId()},{reload:!0}),c.currentContainerLoading=!1},function(){s.error("container.error")})}},{key:"verifyDebugMode",value:function(){var e=this;if(this.isDebugModeEnabled()){var t=l.get(h);t===this.$container.id?(this.debugMode=!0,this.previewedContainer=this.$container,this.translate(["Now Previewing"]).then(function(t){e.previewedContainerText=t["Now Previewing"]})):this.disableDebugMode()}}},{key:"isDebugModeEnabled",value:function(){var e=l.get(h),t=l.get(d);return void 0!==e&&void 0!==t&&e===t}},{key:"enableDebugMode",value:function(){var e=this;this.debugMode=!0,this.previewedContainer=this.$container,this.translate(["Now Previewing"]).then(function(t){e.previewedContainerText=t["Now Previewing"]}),l.put(d,this.$container.id),l.put(h,this.$container.id)}},{key:"disableDebugMode",value:function(){this.debugMode=!1,this.previewedContainer=void 0,l.remove(d),l.remove(h)}},{key:"setTypes",value:function(){return f.query(this.getId()).then(function(e){for(var t=e.length,r=[];t--;)r[t]={name:e[t].name,type:e[t].type};return r})}},{key:"hasPermission",value:function(e){return this.getContainer().then(function(t){return t.hasPermission(e)})}}]),e}();r["default"]=p},{}],54:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(){function e(){n(this,e)}return i(e,[{key:"list",value:function(e){return{limit:e.count,offset:(e.page-1)*e.count}}}]),e}();r["default"]=o},{}],55:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t,r){return!o(e)||r?f[u]:t?f[s]:f[c]}function o(e){return!!e.publishedAt}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=0,u=1,c=2,l=3,f=[{name:"Draft","class":"stg-status-badge-draft"},{name:"Draft - never published","class":"stg-status-badge-never-published"},{name:"Published","class":"stg-status-badge-published"},{name:"","class":""}],d=void 0,h=function(){function e(t){n(this,e),d=t}return a(e,[{key:"getPublishedStatusForContainer",value:function(e){return i(e,e.hasUnpublishedChanges)}},{key:"getPublishedStatusForTag",value:function(e){var t=d.$container;if(!t)return f[l];var r=new Date(e.updatedAt),n=new Date(e.createdAt),o=new Date(t.publishedAt),a=r>o,s=n>o;return i(t,a,s)}}]),e}();r["default"]=h},{}],56:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var i=e("./controllers/ManageController.js"),o=n(i),a=e("./controllers/CreateController.js"),s=n(a),u=e("./controllers/EditController.js"),c=n(u),l=e("./controllers/ExplanationController.js"),f=n(l),d=e("./controllers/PermissionsController.js"),h=n(d),p=e("./controllers/PrivacyController.js"),v=n(p),g=e("./resource/ContainerResource.js"),m=n(g),y=e("./resource/PermissionResource.js"),b=n(y),j=e("./service/ParamConverter.js"),w=n(j),P=e("./service/CurrentContainer.js"),_=n(P),C=e("./service/PublishedStatus.js"),O=n(C),T="clearcode.tm.tagContainer",E="clearcode.tm.debug",k="app/modules/tagContainer";m["default"].$inject=["$http","$q",E+".websiteResource"],b["default"].$inject=["$http","$q"],_["default"].$inject=["$stateParams",T+".containerResource","clearcode.tm.alert.alert","$state","$rootScope","$cookieStore","clearcode.tm.condition.conditionResource","$translate"],O["default"].$inject=[T+".currentContainer"],o["default"].$inject=["ngTableParams","$scope","$timeout",T+".containerResource",T+".publishedStatus","clearcode.tm.alert.alert",T+".paramConverter",T+".currentContainer"],s["default"].$inject=[T+".containerResource","$state","clearcode.tm.alert.alert","clearcode.tm.pageInfo.pageInfo","$translate"],c["default"].$inject=[T+".containerResource","$state","$stateParams","clearcode.tm.alert.alert","clearcode.tm.tagContainer.currentContainer","clearcode.tm.pageInfo.pageInfo","$scope","$translate"],f["default"].$inject=[T+".containerResource","$stateParams","clearcode.tm.pageInfo.pageInfo","clearcode.tm.tagContainer.currentContainer","$translate"],h["default"].$inject=["ngTableParams",T+".paramConverter",T+".currentContainer","clearcode.tm.alert.alert",T+".permissionResource"],v["default"].$inject=["$stateParams",T+".containerResource"],angular.module(T,["pascalprecht.translate","ui.router","ngTable","ngCookies","clearcode.tm.condition","clearcode.tm.alert","clearcode.tm.pageInfo","clearcode.tm.user",E]).run(["$rootScope",T+".currentContainer","$stateParams","clearcode.tm.alert.$alert",function(e,t,r,n){e.currentContainerLoading=!0,e.currentContainer=t;var i=function(n){if(n!==r.containerId){var i=t.get(n);i.then(function(t){e.$broadcast("pageInfo.reload",t)})}};e.$on("$stateChangeStart",function(e,t,r){i(r.containerId)}),n.addMessagePattern("success.restore","Well done! Action completed successfully."),n.addMessagePattern("container.create","Container has been created successfully."),n.addMessagePattern("container.error","Sorry, something went wrong."),n.addMessagePattern("success.publish","Container has been published! Changes are now live!"),n.addMessagePattern("permissions.error","Permissions can not be changed.")}]).config(["$stateProvider",function(e){e.state("container",{url:"/containers",controller:T+".ManageController as view",templateUrl:k+"/views/manage.html",data:{roles:["ROLE_SUPER_ADMIN"],hasContainerList:!1,permission:["view"]}}).state("containerCreate",{url:"/containers-create",controller:T+".CreateController as view",templateUrl:k+"/views/create.html",data:{roles:["ROLE_SUPER_ADMIN"],hasContainerList:!1,permission:["edit"]}}).state("containerExplanation",{url:"/containers-explanation/{containerId}",controller:T+".ExplanationController as view",templateUrl:k+"/views/explanation.html",data:{roles:["ROLE_SUPER_ADMIN"],hasContainerList:!0,permission:["owner"]}}).state("containerEdit",{url:"/containers-edit/{containerId}",controller:T+".EditController as view",templateUrl:k+"/views/options.html",data:{roles:["ROLE_SUPER_ADMIN"],hasContainerList:!0,permission:["edit"]}})}]).controller(T+".ManageController",o["default"]).controller(T+".CreateController",s["default"]).controller(T+".EditController",c["default"]).controller(T+".ExplanationController",f["default"]).controller(T+".PermissionsController",h["default"]).controller(T+".PrivacyController",v["default"]).service(T+".containerResource",m["default"]).service(T+".permissionResource",b["default"]).service(T+".paramConverter",w["default"]).service(T+".currentContainer",_["default"]).service(T+".publishedStatus",O["default"]),t.exports={MODULE_NAME:T}},{"./controllers/CreateController.js":43,"./controllers/EditController.js":44,"./controllers/ExplanationController.js":45,"./controllers/ManageController.js":46,"./controllers/PermissionsController.js":47,"./controllers/PrivacyController.js":48,"./resource/ContainerResource.js":51,"./resource/PermissionResource.js":52,"./service/CurrentContainer.js":53,"./service/ParamConverter.js":54,"./service/PublishedStatus.js":55}],57:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=[{value:0,name:"Page view"},{value:1,name:"DOM ready"},{value:2,name:"Page load"}],a=["Page Load","DOM Ready"],s=function(){function e(t,r,i,s,u,c,l,f,d,h){function p(e){return e.filter(function(e){return a.indexOf(e)===-1})}var v=this;n(this,e);var g="Triggers";this.required=void 0,this.variables=void 0,this.actions=void 0,this.triggerPromise=void 0,this.triggerResource=r,this.conditionResource=i,this.scope=t,this.stateParams=s,this.state=u,this.alert=c,this.currentContainer=l,this.Condition=f,this.PageInfo=d,this.typesArrayPromise=f.getArrayOfTypes().then(p),this.trigger=r.getEntityObject(),this.condition=i.getEntityObject(),this.translate=h,t.$on("pageInfo.reload",function(e,t){v.translate([v.getBreadcrumbText(),g]).then(function(e){d.clear().add(t.name,"tags",{containerId:t.id}).add(e[g],"triggers",{containerId:t.id}).add(e[v.getBreadcrumbText()]).broadcast()})}),this.pageViewTriggerTypes=o}return i(e,[{key:"setType",value:function(e){var t=this;if(void 0===this.typesArray[e])throw new Error("Invalid type");this.trigger.type=e,this.trigger.conditions=[],this.Condition.getVariables(e).then(function(e){t.variables=e}),this.Condition.getActions(e).then(function(e){t.actions=e}),this.Condition.getRequired(e).then(function(e){t.required=e;for(var r=t.required.length;r--;)t.trigger.conditions.push({variable:t.required[r].name,condition:t.actions[0].type,value:""})})}},{key:"addCondition",value:function(){this.condition=this.conditionResource.getEntityObject(),this.condition.variable=this.variables[0].name,this.condition.condition=this.actions[0].type,this.trigger.addCondition(this.condition)}},{key:"validateTrigger",value:function(e){this.scope[e.$name].$setPristine();var t=this.trigger.conditions.length;if(this.scope[e.$name].name.$valid){if(0!==t)for(;t--;)if(this.scope[e.$name]["conditionValue["+t+"]"].$invalid)return!1;return!0}return!1}},{key:"isTypeRequired",value:function(e){return void 0!==this.required&&this.required.map(function(e){return e.name}).indexOf(e)!==-1}},{key:"getVariableName",value:function(e){var t=this.variables.map(function(e){return e.name}).indexOf(e);return t===-1?(t=this.required.map(function(e){return e.name}).indexOf(e),t!==-1&&this.required[t].name):this.variables[t].name}},{key:"getConditionName",value:function(e){var t=this.actions.map(function(e){return e.name}).indexOf(e);return t!==-1&&this.actions[t].name}},{key:"leaveFormInsideTag",value:function(){var e=this;return this.translate([this.getBreadcrumbText()]).then(function(t){e.PageInfo.clear().add(e.currentContainer.$container.name,"tags",{containerId:e.currentContainer.$container.id}).add(t[e.getBreadcrumbText()]).broadcast()}),!1}},{key:"showFormForSynchronousTrigger",value:function(){var e="sync"===this.scope.tagTemplateTab;return this.trigger.isAddedToSynchronousTag||e}},{key:"submitForm",value:function(e){var t=this;this.triggerPromise=e.save(this.stateParams.containerId),this.triggerPromise.then(function(){t.currentContainer.makeChanges(),t.alert.success(t.getAlertType()),t.state.go("triggers",{containerId:t.stateParams.containerId})},function(){t.alert.error("error.invalid")})}},{key:"displayInvalidFormMessage",value:function(e){e.validateTriggers=!0,this.alert.error("error.invalid")}}]),e}();r["default"]=s},{}],58:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=e("./BaseController.js"),c=n(u),l="Triggers",f=function(e){function t(e,r,n,a,s,u,c,f,d,h){i(this,t);var p=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r,n,a,s,u,c,f,d,h));return p.typesArrayPromise.then(function(e){p.typesArray=e,p.setType(0)}),c.getContainer().then(function(){c.$container.hasPermission("edit")||s.go("triggers",{containerId:a.containerId}),p.translate([p.getBreadcrumbText(),l]).then(function(e){d.clear().add(c.$container.name,"tags",{containerId:c.$container.id}).add(e[l],"triggers",{containerId:c.$container.id}).add(e[p.getBreadcrumbText()]).broadcast()})}),p}return a(t,e),s(t,[{key:"getBreadcrumbText",value:function(){return"Add a new trigger"}},{key:"getAlertType",value:function(){return"success.create"}},{key:"addTrigger",value:function(e,t){var r=this;this.triggerPromise=t.save(this.stateParams.containerId),this.triggerPromise.then(function(t){r.scope[e.$name].$setPristine(),r.trigger=r.triggerResource.getEntityObject(),r.scope.$emit("trigger.add",t)},function(){})}}]),t}(c["default"]);r["default"]=f},{"./BaseController.js":57}],59:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=e("./BaseController.js"),c=n(u),l="Triggers",f=function(e){function t(e,r,n,a,s,u,c,f,d,h){i(this,t);var p=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r,n,a,s,u,c,f,d,h));return p.triggerPromise=r.get(a.triggerId),p.triggerPromise.then(function(e){p.trigger=e,p.typesArrayPromise.then(function(e){p.typesArray=e,p.Condition.getVariables(p.trigger.type).then(function(e){p.variables=e}),p.Condition.getActions(p.trigger.type).then(function(e){p.actions=e}),p.Condition.getRequired(p.trigger.type).then(function(e){p.required=e})})}),p.currentContainer.getContainer().then(function(){p.currentContainer.$container.hasPermission("noaccess")&&p.state.go("container"),p.translate([p.getBreadcrumbText(),l]).then(function(e){d.clear().add(p.currentContainer.$container.name,"tags",{containerId:p.currentContainer.$container.id}).add(e[l],"triggers",{containerId:p.currentContainer.$container.id}).add(e[p.getBreadcrumbText()]).broadcast()})}),p}return a(t,e),s(t,[{key:"getBreadcrumbText",value:function(){return"Configure trigger"}},{key:"getAlertType",value:function(){return"success.edit"}}]),t}(c["default"]);r["default"]=f},{"./BaseController.js":57}],60:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=e("./BaseController.js"),c=n(u),l=function(e){function t(e,r,n,a,s,u,c,l,f){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r,n,a,null,s,u,c,l,f))}return a(t,e),s(t,[{key:"initTrigger",value:function(e){var t=this;this.triggerPromise=this.triggerResource.get(e),this.triggerPromise.then(function(e){t.trigger=e,t.typesArrayPromise.then(function(e){t.typesArray=e,t.Condition.getVariables(t.trigger.type).then(function(e){t.variables=e}),t.Condition.getActions(t.trigger.type).then(function(e){t.actions=e}),t.Condition.getRequired(t.trigger.type).then(function(e){t.required=e})})})}},{key:"getBreadcrumbText",value:function(){return"Configure trigger"}},{key:"getAlertType",value:function(){return"success.edit"}},{key:"submitForm",value:function(e){var t=this;this.triggerPromise=e.save(this.stateParams.containerId),this.triggerPromise.then(function(e){t.currentContainer.makeChanges(),t.alert.success("trigger.edit"),t.scope.$emit("trigger.edit",e)},function(){t.alert.error("error.invalid")})}}]),t}(c["default"]);r["default"]=l},{"./BaseController.js":57}],61:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=void 0,a=void 0,s=void 0,u=void 0,c=void 0,l=void 0,f="Triggers",d=function(){function e(t,r,i,d,h,p,v,g,m,y,b){var j=this;n(this,e),o=d,s=r,a=i,u=p,c=g,l=m,this.typesArrayPromise=l.getArrayOfTypes(),this.typesArrayPromise.then(function(e){j.typesArray=e}),this.translate=b,this.containerId=s.containerId,this.tableParams=new t({page:1,count:10,sorting:{name:"asc"}},{total:0,getData:function(e,t){a.query(s.containerId,h.list(t.url())).then(function(r){t.total(r.total),e.resolve(r.data)})}}),u.getContainer().then(function(){u.$container.hasPermission("view")||y.go("container"),j.translate([f]).then(function(e){v.clear().add(u.$container.name,"tags",{containerId:u.$container.id}).add(e[f]).broadcast()})}),c.$on("pageInfo.reload",function(e,t){j.translate([f]).then(function(e){v.clear().add(t.name,"tags",{containerId:t.id}).add(e[f]).broadcast()})})}return i(e,[{key:"removeTrigger",value:function(e){var t=this;e.remove().then(function(){o.success("success.remove"),u.makeChanges(),1===t.tableParams.data.length&&t.tableParams.page()>1?t.tableParams.page(t.tableParams.page()-1):t.tableParams.reload()},function(){o.error("error.remove"),t.tableParams.reload()})}}]),e}();r["default"]=d},{}],62:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(e){var t=function(){function t(){n(this,t),this.id=void 0,this.name=void 0,this.type=0,this.subtype=0,this.conditions=[],this.tagsCount=void 0,this.updatedAt=void 0,this.isAddedToSynchronousTag=!1}return i(t,[{key:"addCondition",value:function(e){this.conditions.push(e)}},{key:"removeCondition",value:function(e){this.conditions.splice(e,1)}},{key:"save",value:function(t){var r={},n=void 0,i=["id","updatedAt","createdAt","tagsCount","isAddedToSynchronousTag"];for(var o in this)if(!angular.isFunction(this[o])&&this.hasOwnProperty(o)&&i.indexOf(o)===-1)if("conditions"===o){var a=[];for(var s in this[o])this[o][s]instanceof Object&&a.push({variable:this[o][s].variable,condition:this[o][s].condition,value:this[o][s].value});r[o]=a}else r[o]=this[o];return n=void 0===this.id?e.post(t,r):e.put(this.id,r)}},{key:"remove",value:function(){return void 0!==this.id&&e["delete"](this.id)}}]),t}();return t};r["default"]=o},{}],63:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){e.type===f&&(e.type=l,e.subtype=h),e.type===d&&(e.type=l,e.subtype=p)}function a(e,t){t.type===l&&t.subtype===h&&(e.type=f),t.type===l&&t.subtype===p&&(e.type=d),delete e.subtype}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=e("../entity/Trigger.js"),c=n(u),l=0,f=4,d=5,h=1,p=2,v=function(e){var t=(0,c["default"])(this),r=new t;return void 0!==e&&(r.id=e.id,r.name=e.name,r.type=e.type,r.conditions=e.conditions,r.tagsCount=e.tags_count,r.updatedAt=e.updated_at,r.isAddedToSynchronousTag=e.is_added_to_synchronous_tag,o(r)),r},g=function(e){var t=(0,c["default"])(this),r=new t;return void 0!==e&&(r.id=e.id,r.name=e.name,r.type=e.type,r.conditions=e.conditions,r.tagsCount=e.tags_count,r.updatedAt=e.updated_at,delete r.isAddedToSynchronousTag,a(r,e)),r},m=function(e,t){return e=angular.isArray(e)?e:[e],e.concat(t)},y=function(){function e(t,r){i(this,e),this.http=t,this.q=r}return s(e,[{key:"getEntityObject",value:function(){var e=(0,c["default"])(this);return new e}},{key:"get",value:function(e){var t=this,r=this.q.defer();return this.http({method:"GET",url:"/api/triggers/"+e,transformResponse:m(this.http.defaults.transformResponse,function(e,r,n){return n<400?v.call(t,e.data):e})}).success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise}},{key:"query",value:function(e,t){var r=this,n=this.q.defer();return this.http({method:"GET",url:"/api/containers/"+e+"/triggers",params:t,transformResponse:m(this.http.defaults.transformResponse,function(e){for(var t in e.data)e.data[t]instanceof Object&&(e.data[t]=v.call(r,e.data[t]));return e})}).success(function(e){n.resolve(e)}).error(function(e){n.reject(e)}),n.promise}},{key:"delete",value:function(e){var t=this.q.defer();return this.http({method:"DELETE",url:"/api/triggers/"+e}).success(function(e){t.resolve(e)}).error(function(e){t.reject(e)}),t.promise}},{key:"post",value:function(e,t){var r=this,n=this.q.defer();return this.http({method:"POST",url:"/api/containers/"+e+"/triggers",data:t,transformRequest:m(g,this.http.defaults.transformRequest),transformResponse:m(this.http.defaults.transformResponse,function(e,t,n){return n<400?v.call(r,e.data):e})}).success(function(e){n.resolve(e)}).error(function(e){n.reject(e)}),n.promise}},{key:"put",value:function(e,t){var r=this,n=this.q.defer();return this.http({method:"PUT",url:"/api/triggers/"+e,data:t,transformRequest:m(g,this.http.defaults.transformRequest),transformResponse:m(this.http.defaults.transformResponse,function(e,t,n){return n<400?v.call(r,e.data):e})}).success(function(e){n.resolve(e)}).error(function(e){n.reject(e)}),n.promise}}]),e}();r["default"]=y},{"../entity/Trigger.js":62}],64:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var i=e("./controllers/CreateController.js"),o=n(i),a=e("./controllers/EditController.js"),s=n(a),u=e("./controllers/ManageController.js"),c=n(u),l=e("./controllers/EditInsideTagController.js"),f=n(l),d=e("./resource/TriggerResource.js"),h=n(d),p="clearcode.tm.trigger",v="clearcode.tm.condition",g="/app/modules/trigger";c["default"].$inject=["ngTableParams","$stateParams",p+".triggerResource","clearcode.tm.alert.alert","clearcode.tm.tagContainer.paramConverter","clearcode.tm.tagContainer.currentContainer","clearcode.tm.pageInfo.pageInfo","$scope","clearcode.tm.condition.condition","$state","$translate"],o["default"].$inject=["$scope",p+".triggerResource",v+".conditionResource","$stateParams","$state","clearcode.tm.alert.alert","clearcode.tm.tagContainer.currentContainer","clearcode.tm.condition.condition","clearcode.tm.pageInfo.pageInfo","$translate"],s["default"].$inject=["$scope",p+".triggerResource",v+".conditionResource","$stateParams","$state","clearcode.tm.alert.alert","clearcode.tm.tagContainer.currentContainer","clearcode.tm.condition.condition","clearcode.tm.pageInfo.pageInfo","$translate"],f["default"].$inject=["$scope",p+".triggerResource",v+".conditionResource","$stateParams","clearcode.tm.alert.alert","clearcode.tm.tagContainer.currentContainer","clearcode.tm.condition.condition","clearcode.tm.pageInfo.pageInfo","$translate"],h["default"].$inject=["$http","$q"],angular.module(p,["pascalprecht.translate","ui.router","ngTable","clearcode.tm.alert","clearcode.tm.pageInfo","clearcode.tm.tagContainer","clearcode.tm.condition"]).config(["$stateProvider",function(e){e.state("triggers",{url:"/containers/{containerId}/triggers",controller:p+".ManageController as view",templateUrl:g+"/views/manage.html",data:{roles:["ROLE_SUPER_ADMIN"],hasContainerList:!0}}).state("triggerCreate",{url:"/containers/{containerId}/trigger-create",controller:p+".CreateController as triggerForm",templateUrl:g+"/views/create.html",data:{roles:["ROLE_SUPER_ADMIN"],hasContainerList:!0}}).state("triggerEdit",{url:"/containers/{containerId}/trigger/edit/{triggerId}",controller:p+".EditController as triggerForm",templateUrl:g+"/views/edit.html",data:{roles:["ROLE_SUPER_ADMIN"],hasContainerList:!0}})}]).run(["clearcode.tm.alert.$alert",function(e){e.addMessagePattern("trigger.create","Trigger has been created successfully."),e.addMessagePattern("trigger.edit","Trigger has been updated successfully.")}]).controller(p+".CreateController",o["default"]).controller(p+".EditController",s["default"]).controller(p+".ManageController",c["default"]).controller(p+".EditInsideTagController",f["default"]).service(p+".triggerResource",h["default"]),t.exports={MODULE_NAME:p}},{"./controllers/CreateController.js":58,"./controllers/EditController.js":59,"./controllers/EditInsideTagController.js":60,"./controllers/ManageController.js":61,"./resource/TriggerResource.js":63}],65:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=void 0,a=void 0,s=function(){function e(t,r,i){n(this,e),o=t,a=r,this.version=i}return i(e,[{key:"updateAvailable",value:function(){return void 0!==this.version.latest&&!this.version.isUpToDate()}},{key:"startUpdate",value:function(){o.setSession().then(function(e){a.location.href=e.url})}}]),e}();r["default"]=s},{}],66:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(e,t){return{restrict:"A",scope:{stgVersion:"@"},link:function(r){e.current=r.stgVersion,void 0===e.latest&&t.getLatest(e.current).then(function(t){e.latest=t.version})}}};r["default"]=n},{}],67:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(){function e(t,r,i){n(this,e),this.http=t,this.q=r,this.location=i}return i(e,[{key:"setSession",value:function(){var e=this.q.defer();return this.http({method:"GET",url:"admin-tools/update"}).success(function(t){e.resolve(t)}).error(function(t){e.reject(t)}),e.promise}},{key:"getLatest",value:function(e){var t=this.q.defer(),r=this.location.host();return this.http({method:"GET",url:"//download.impono.org/version.json",params:{version:e,domain:r},headers:{"Access-Control-Request-Headers":void 0}}).success(function(e){t.resolve(e)}).error(function(e){t.reject(e)}),t.promise}}]),e}();r["default"]=o},{}],68:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(){function e(){n(this,e),this.current=void 0,this.latest=void 0}return i(e,[{key:"isUpToDate",value:function(){return void 0!==this.current&&this.current===this.latest}}]),e}();r["default"]=o},{}],69:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var i=e("./controllers/VersionController.js"),o=n(i),a=e("./resources/UpdateResource.js"),s=n(a),u=e("./services/Version.js"),c=n(u),l=e("./directives/setVersionDirective.js"),f=n(l),d="clearcode.tm.update";o["default"].$inject=[d+".updateResource","$window",d+".version"],s["default"].$inject=["$http","$q","$location"],f["default"].$inject=[d+".version","clearcode.tm.update.updateResource"],c["default"].$inject=["$rootScope"],angular.module(d,[]).controller(d+".VersionController",o["default"]).service(d+".updateResource",s["default"]).service(d+".version",c["default"]).directive("stgSetVersion",f["default"]),t.exports={MODULE_NAME:d}},{"./controllers/VersionController.js":65,"./directives/setVersionDirective.js":66,"./resources/UpdateResource.js":67,"./services/Version.js":68}],70:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o="My account",a=function(){function e(t,r,i,a,s,u){n(this,e),this.ACTIVATION_SET_PASSWORD="ACTIVATION_SET_PASSWORD",this.ROLE_API="ROLE_API",this.ROLE_USER="ROLE_USER",this.ROLE_SUPER_ADMIN="ROLE_SUPER_ADMIN",this.ROLE_CONTAINERS_CREATE="ROLE_CONTAINERS_CREATE",this.alert=r,this.state=a,this.userResource=t,this.userPromise=void 0,this.user=t.getEntity(),s([o]).then(function(e){i.clear().add(e[o]).broadcast()}),u.success("LANGUAGE_CHANGE_MESSAGE","user.change_language")}return i(e,[{key:"displayRoleSectionForUser",value:function(){return!this.state.includes("editProfile")}},{key:"displayPasswordSection",value:function(){return!!this.activation&&this.activation===this.ACTIVATION_SET_PASSWORD}},{key:"setUser",value:function(e){var t=this;this.state.includes("editProfile")?this.userPromise=this.userResource.getMe():(this.role=void 0,this.createContainerRole=void 0,this.userPromise=this.userResource.get(e)),this.userPromise.then(function(e){t.user=e,t.role=t.getUserRole(),t.createContainerRole=t.user.roles.indexOf(t.ROLE_CONTAINERS_CREATE)!==-1})}},{key:"getUserRole",value:function(){return this.user.hasRole(this.ROLE_SUPER_ADMIN)?this.ROLE_SUPER_ADMIN:this.user.hasRole(this.ROLE_API)?this.ROLE_API:this.ROLE_USER}},{key:"setRole",value:function(e){var t=this.user.roles.indexOf(e);return t!==-1?(this.user.roles.splice(t,1),!1):(this.user.roles.push(e),!0)}},{key:"submitForm",value:function(e){var t=this;this.state.includes("editProfile")?this.userPromise=e.saveMe():(e.roles=[this.role],this.role===this.ROLE_USER&&this.createContainerRole&&e.roles.push(this.ROLE_CONTAINERS_CREATE),this.userPromise=e.save()),this.userPromise.then(function(){t.alert.success("user.save"),t.state.includes("editProfile")||t.state.go("users")},function(){t.alert.error("user.invalid")})}},{key:"displayInvalidFormMessage",value:function(){this.alert.error("error.invalid")}}]),e}();r["default"]=a},{}],71:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o="My account",a=void 0,s=void 0,u=void 0,c=void 0,l=void 0,f=function(){function e(t,r,i,f,d,h){n(this,e),a=t,s=r,u=i,c=d,l=h,this.validationForce=!1,this.changePasswordPromise=void 0,this.translate=h,this.currentPassword="",this.plainPassword={first:"",second:""},l([o]).then(function(e){f.clear().add(e[o]).broadcast()})}return i(e,[{key:"submitForm",value:function(e,t){var r={current_password:e,plainPassword:t};this.changePasswordPromise=a.changePassword(r),this.changePasswordPromise.then(function(){s.success("password.change"),u.go("container")},function(){s.error("error.invalid")})}},{key:"displayInvalidFormMessage",value:function(e){this.validationForce=!0,e.first!==e.second?(c.changePasswordForm.first.$invalid=!0,c.changePasswordForm.second.$invalid=!0,l(["Passwords have to be identical"]).then(function(e){c.changePasswordForm.first.$error.first=[e["Passwords have to be identical"]]}),c.changePasswordForm.second.$error.second=[],s.error("error.invalid")):void 0===e.first||void 0===e.second?s.error("password.both"):s.error("error.invalid")}}]),e}();r["default"]=f},{}],72:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=e("./BaseController.js"),c=n(u),l="Add a user",f="Users",d="ACTIVATION_EMAIL",h="ACTIVATION_SET_PASSWORD",p="ROLE_USER",v=void 0,g=void 0,m=function(e){function t(e,r,n,a,s,u,c){i(this,t);var h=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r,n,a,u,c));return v=s,g=u,h.activation=d,h.role=p,h.password={first:"",second:""},g([l,f]).then(function(e){n.clear().add(e[f],"users").add(e[l]).broadcast()}),h}return a(t,e),s(t,[{key:"createUserFormValidation",value:function(){var e=!1;return v.createUserForm.first.$dirty=!0,v.createUserForm.second.$dirty=!0,this.password.first!==this.password.second?(v.createUserForm.first.$invalid=!0,v.createUserForm.second.$invalid=!0,g(["Passwords have to be identical"]).then(function(e){v.createUserForm.first.$error.first=[e["Passwords have to be identical"]]}),v.createUserForm.second.$error.second=[],e=!1):this.password.first.length<8||this.password.second.length<8?(v.createUserForm.first.$invalid=!0,v.createUserForm.second.$invalid=!0,g(["Password needs to have minimum 8 characters"]).then(function(e){v.createUserForm.first.$error.first=[e["Password needs to have minimum 8 characters"]]}),v.createUserForm.second.$error.second=[],e=!1):this.activation===h&&(e=!0),v.createUserForm.$valid||(e=!1),v.createUserForm.$valid&&this.activation===d&&(e=!0),e||this.alert.error("user.invalid"),e}},{key:"submitForm",value:function(e){var t=this;e.roles=[this.role],this.role===this.ROLE_USER&&this.createContainerRole&&e.roles.push(this.ROLE_CONTAINERS_CREATE),this.activation===h&&(e.plainPassword=this.password),this.userPromise=e.save(),this.userPromise.then(function(){t.alert.success("user.save"),t.state.go("users")},function(){t.alert.error("user.invalid")})}}]),t}(c["default"]);r["default"]=m},{"./BaseController.js":70}],73:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=e("./BaseController.js"),c=n(u),l="Edit user",f="Users",d=void 0,h=void 0,p=void 0,v=function(e){function t(e,r,n,a,s,u,c,v,g){i(this,t);var m=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,a,s,c,v));return d=u,h=s,p=c,m.security=g,h.includes("editProfile")?m.setUser():(m.activation=m.ACTIVATION_SET_PASSWORD,m.password={first:"",second:""},m.setUser(r.userId),p([l,f]).then(function(e){a.clear().add(e[f],"users").add(e[l]).broadcast()})),m}return a(t,e),s(t,[{key:"editUserFormValidation",value:function(){return d.editUserForm.first.$dirty=!0,d.editUserForm.second.$dirty=!0,""===this.password.first&&""===this.password.second||(this.password.first!==this.password.second?(d.editUserForm.first.$invalid=!0,d.editUserForm.second.$invalid=!0,p(["Passwords have to be identical"]).then(function(e){d.editUserForm.first.$error.first=[e["Passwords have to be identical"]]}),d.editUserForm.second.$error.second=[],!1):this.password.first.length<8||this.password.second.length<8?(d.editUserForm.first.$invalid=!0,d.editUserForm.second.$invalid=!0,p(["Password needs to have minimum 8 characters"]).then(function(e){d.editUserForm.first.$error.first=[e["Password needs to have minimum 8 characters"]]}),d.editUserForm.second.$error.second=[],!1):d.editUserForm.$valid)}},{key:"submitForm",value:function(e){var t=this;e.roles=[this.role],this.role===this.ROLE_USER&&this.createContainerRole&&e.roles.push(this.ROLE_CONTAINERS_CREATE),this.hasOwnProperty("password")&&""!==this.password.first&&(e.plainPassword=this.password),h.includes("editProfile")?this.userPromise=e.saveMe():this.userPromise=e.save(),this.userPromise.then(function(){t.security.getUser(!0),t.alert.success("user.save"),h.includes("editProfile")||h.go("users")},function(){t.alert.error("user.invalid")})}}]),t}(c["default"]);r["default"]=v},{"./BaseController.js":70}],74:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=void 0,a=void 0,s="Users",u=function(){function e(t,r,i,u,c,l,f){n(this,e),this.translate=f,o=i,a=r,c.disableDebugMode(),this.tableParams=new t({page:1,count:10,sorting:{name:"asc"}},{total:0,getData:function(e,t){r.query(u.list(t.url())).then(function(r){t.total(r.total),e.resolve(r.data)})}}),this.translate([s]).then(function(e){l.clear().add(e[s]).broadcast()})}return i(e,[{key:"removeUser",value:function(e){var t=this;e.remove().then(function(){o.success("success.remove"),1===t.tableParams.data.length&&t.tableParams.page(t.tableParams.page()-1),t.tableParams.reload()},function(){o.error("error.remove"),t.tableParams.reload()})}},{key:"resetPassword",value:function(e){var t=this,r={username:e.email};this.resetPromise=a.resetPassword(r),this.resetPromise.then(function(){o.success("user.reset"),t.tableParams.reload()})}}]),e}();r["default"]=u},{}],75:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i,o,a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s="My account",u=function(){function e(t,r,a,u,c,l){var f=this;n(this,e),i=t,this.scope=r,o=u,this.validationForce=!1,this.translate=a,this.window=c,this.languages=o.getLanguages(),this.languages.length||(this.loadTranslationsPromise=o.loadAvailableTranslations(),this.loadTranslationsPromise.then(function(){f.languages=o.languages})),a([s]).then(function(e){l.clear().add(e[s]).broadcast()})}return a(e,[{key:"submitForm",value:function(e){var t=this,r=this.window.localStorage.NG_TRANSLATE_LANG_KEY,n=r?r:"en";this.othersSettingsPromise=e.saveOthersSettings(),this.othersSettingsPromise.then(function(e){t.translate.use(e.language).then(function(){e.language!==n?(t.window.localStorage.LANGUAGE_CHANGE_MESSAGE=!0,t.window.location.reload()):i.success("user.save")})},function(){i.error("error.invalid")})}}]),e}();r["default"]=u},{}],76:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i,o,a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s="Forgot your password?",u=function(){function e(t,r,a,u,c){n(this,e),this.email="",this.translate=c,this.alert=a,i=t,o=r,o.getStorage().clean(),this.validationForce=!1,this.resetPromise=void 0,this.success=!1,this.translate([s]).then(function(e){u.clear().add(e[s]).broadcast()})}return a(e,[{key:"submitForm",value:function(e){var t=this,r={username:e};this.resetPromise=i.resetPassword(r),this.resetPromise.then(function(){o.getStorage().clean(),t.success=!0,t.translate(["The email with the activation link has been sent successfully."]).then(function(e){t.formTitle=e["The email with the activation link has been sent successfully."]})},function(){o.getStorage().clean(),o.error("request.error"),t.alert.error("error.invalid")})}},{key:"displayInvalidFormMessage",value:function(){this.validationForce=!0,this.alert.error("error.invalid"),o.getStorage().clean(),o.error("invalid.email")}}]),e}();r["default"]=u},{}],77:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{
value:!0});var i,o,a,s,u,c=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l="Change your password",f=function(){function e(t,r,c,f,d,h,p){n(this,e),this["new"]={first:void 0,second:void 0},this.validationForce=!1,this.changePasswordPromise=void 0,this.translate=p,i=t,o=r,a=c,s=f,u=h,""===a.token&&(o.go("signIn"),s.error("changePassword.token")),this.translate([l]).then(function(e){d.clear().add(e[l]).broadcast()})}return c(e,[{key:"submitForm",value:function(e){var t={plainPassword:e};this.changePasswordPromise=i.setPassword(t,a.token),this.changePasswordPromise.then(function(){o.go("signIn"),s.success("changePassword.success")},function(){s.error("changePassword.error")})}},{key:"displayInvalidFormMessage",value:function(e){this.validationForce=!0,e.first!==e.second?(u.resetPasswordForm.first.$invalid=!0,u.resetPasswordForm.second.$invalid=!0,this.translate(["Passwords have to be identical"]).then(function(e){u.resetPasswordForm.first.$error.first=[e["Passwords have to be identical"]]}),u.resetPasswordForm.second.$error.second=[]):void 0!==e.first&&void 0!==e.second||s.error("password.both")}}]),e}();r["default"]=f},{}],78:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(e){var t=function(){function t(){n(this,t),this.id=void 0,this.email=void 0,this.firstName=void 0,this.lastName=void 0,this.displayName=void 0,this.roles=[],this.status=!1,this.createdAt=void 0,this.language=void 0}return i(t,[{key:"hasRole",value:function(e){return this.roles.indexOf(e)!==-1}},{key:"save",value:function(){var t={},r=void 0,n=["id","displayName","status","createdAt","language"],i=["email"];for(var o in this)!angular.isFunction(this[o])&&this.hasOwnProperty(o)&&n.indexOf(o)===-1&&(void 0!==this.id&&i.indexOf(o)!==-1||(t[o]=this[o]));return r=void 0===this.id?e.post(t):e.put(this.id,t)}},{key:"saveMe",value:function(){var t={},r=void 0,n=["id","displayName","roles","status","createdAt","email","language"];for(var i in this)!angular.isFunction(this[i])&&this.hasOwnProperty(i)&&n.indexOf(i)===-1&&(t[i]=this[i]);return r=e.putMe(t)}},{key:"saveOthersSettings",value:function(){var t={},r=void 0,n=["id","displayName","roles","status","createdAt","email","firstName","lastName"];for(var i in this)!angular.isFunction(this[i])&&this.hasOwnProperty(i)&&n.indexOf(i)===-1&&(t[i]=this[i]);return r=e.othersSettingsMe(t)}},{key:"remove",value:function(){return void 0!==this.id&&e["delete"](this.id)}}]),t}();return t};r["default"]=o},{}],79:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=e("../entities/User.js"),s=n(a),u="/api/users/me/change-password",c="/api/reset-password/request",l="/api/reset-password/token/",f="en",d=function(e){var t=this.getEntity();return void 0!==e&&(t.id=e.id,t.email=e.email,t.firstName=e.first_name,t.lastName=e.last_name,t.displayName=e.display_name,t.roles=e.roles,t.status=e.status,t.createdAt=e.created_at,null===e.language?t.language=f:t.language=e.language),t},h=function(e,t){return e=angular.isArray(e)?e:[e],e.concat(t)},p=function(){function e(t,r){i(this,e),this.http=t,this.q=r}return o(e,[{key:"getEntity",value:function(){var e=(0,s["default"])(this);return new e}},{key:"get",value:function(e){var t=this,r=this.q.defer();return this.http({method:"GET",url:"/api/users/"+e,transformResponse:h(this.http.defaults.transformResponse,function(e,r,n){return n<400?d.call(t,e.data):e})}).success(function(e){r.resolve(e)}).error(function(){r.reject()}),r.promise}},{key:"getMe",value:function(){var e=this,t=this.q.defer();return this.http({method:"GET",url:"/api/users/me",transformResponse:h(this.http.defaults.transformResponse,function(t,r,n){return n<400?d.call(e,t.data):t})}).success(function(e){t.resolve(e)}).error(function(e){t.reject(e)}),t.promise}},{key:"query",value:function(e){var t=this,r=this.q.defer();return this.http({method:"GET",url:"/api/users",params:e,transformResponse:h(this.http.defaults.transformResponse,function(e){if(status<400)for(var r in e.data)e.data[r]instanceof Object&&(e.data[r]=d.call(t,e.data[r]));return e})}).success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise}},{key:"delete",value:function(e){var t=this.q.defer();return this.http({method:"DELETE",url:"/api/users/"+e}).success(function(e){t.resolve(e)}).error(function(e){t.reject(e)}),t.promise}},{key:"post",value:function(e){var t=this,r=this.q.defer();return this.http({method:"POST",url:"/api/users",data:e,transformResponse:h(this.http.defaults.transformResponse,function(e,r,n){return n<400?d.call(t,e.data):e})}).success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise}},{key:"put",value:function(e,t){var r=this,n=this.q.defer();return this.http({method:"PUT",url:"/api/users/"+e,data:t,transformResponse:h(this.http.defaults.transformResponse,function(e,t,n){return n<400?d.call(r,e.data):e})}).success(function(e){n.resolve(e)}).error(function(e){n.reject(e)}),n.promise}},{key:"putMe",value:function(e){var t=this,r=this.q.defer();return this.http({method:"PUT",url:"/api/users/me",data:e,transformResponse:h(this.http.defaults.transformResponse,function(e,r,n){return n<400?d.call(t,e.data):e})}).success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise}},{key:"othersSettingsMe",value:function(e){var t=this,r=this.q.defer();return this.http({method:"PUT",url:"/api/users/me/others-settings",data:e,transformResponse:h(this.http.defaults.transformResponse,function(e,r,n){return n<400?d.call(t,e.data):e})}).success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise}},{key:"changePassword",value:function(e){var t=this.q.defer();return this.http({method:"POST",data:e,url:u}).success(function(e){t.resolve(e)}).error(function(e){t.reject(e)}),t.promise}},{key:"resetPassword",value:function(e){var t=this.q.defer();return this.http({method:"POST",data:e,url:c}).success(function(e){t.resolve(e)}).error(function(e){t.reject(e)}),t.promise}},{key:"setPassword",value:function(e,t){var r=this.q.defer();return this.http({method:"POST",data:e,url:l+t}).success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise}}]),e}();r["default"]=p},{"../entities/User.js":78}],80:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var i=e("./controllers/CreateController.js"),o=n(i),a=e("./controllers/EditController.js"),s=n(a),u=e("./controllers/ManageController.js"),c=n(u),l=e("./controllers/OthersSettingsController.js"),f=n(l),d=e("./controllers/ChangePasswordController.js"),h=n(d),p=e("./controllers/ResetRequestController.js"),v=n(p),g=e("./controllers/SetPasswordController.js"),m=n(g),y=e("./resources/UserResource.js"),b=n(y),j="clearcode.tm.user",w="app/modules/user";o["default"].$inject=[j+".userResource","clearcode.tm.alert.alert","clearcode.tm.pageInfo.pageInfo","$state","$scope","$translate","clearcode.tm.alert.refreshAlert"],s["default"].$inject=[j+".userResource","$stateParams","clearcode.tm.alert.alert","clearcode.tm.pageInfo.pageInfo","$state","$scope","$translate","clearcode.tm.alert.refreshAlert","clearcode.tm.security.security"],c["default"].$inject=["ngTableParams",j+".userResource","clearcode.tm.alert.alert","clearcode.tm.tagContainer.paramConverter","clearcode.tm.tagContainer.currentContainer","clearcode.tm.pageInfo.pageInfo","$translate"],h["default"].$inject=["clearcode.tm.user.userResource","clearcode.tm.alert.alert","$state","clearcode.tm.pageInfo.pageInfo","$scope","$translate"],f["default"].$inject=["clearcode.tm.alert.alert","$scope","$translate","clearcode.tm.translation.translation","$window","clearcode.tm.pageInfo.pageInfo"],v["default"].$inject=[j+".userResource","clearcode.tm.form.alertForm","clearcode.tm.alert.alert","clearcode.tm.pageInfo.pageInfo","$translate"],m["default"].$inject=[j+".userResource","$state","$stateParams","clearcode.tm.alert.alert","clearcode.tm.pageInfo.pageInfo","$scope","$translate"],b["default"].$inject=["$http","$q"],angular.module(j,["pascalprecht.translate","ui.router","ngTable","clearcode.tm.alert","clearcode.tm.pageInfo","clearcode.tm.form","clearcode.tm.tagContainer","clearcode.tm.security"]).run(["clearcode.tm.alert.$alert",function(e){e.addMessagePattern("user.save","User account has been saved successfully."),e.addMessagePattern("user.change_language","The language has been changed"),e.addMessagePattern("password.change","Your password has been changed successfully."),e.addMessagePattern("user.invalid","Sorry, something went wrong."),e.addMessagePattern("user.reset","Email with activation link has been sent."),e.addMessagePattern("user.others","Other settings has been saved successfully.")}]).config(["$stateProvider",function(e){e.state("users",{url:"/users",controller:j+".ManageController as view",templateUrl:w+"/views/manage.html",data:{roles:["ROLE_SUPER_ADMIN"],hasContainerList:!1}}).state("userCreate",{url:"/users-create",controller:j+".CreateController as view",templateUrl:w+"/views/create.html",data:{roles:["ROLE_SUPER_ADMIN"],hasContainerList:!1}}).state("userEdit",{url:"/users-edit/{userId}",controller:j+".EditController as view",templateUrl:w+"/views/edit.html",data:{roles:["ROLE_SUPER_ADMIN"],hasContainerList:!1}}).state("editProfile",{url:"/profile",controller:j+".EditController as view",controllerAs:"view",data:{roles:["ROLE_SUPER_ADMIN"],secure:!0},templateUrl:"/app/modules/user/views/profile.html"}).state("resetPassword",{url:"/reset-password",controller:j+".ResetRequestController",controllerAs:"view",data:{roles:[],secure:!1},templateUrl:"/app/modules/user/views/resetPassword.html"}).state("resetConfirm",{url:"/reset-password/token/{token}",controller:j+".SetPasswordController",controllerAs:"view",data:{roles:[],secure:!1},templateUrl:"/app/modules/user/views/setPassword.html"})}]).controller(j+".CreateController",o["default"]).controller(j+".EditController",s["default"]).controller(j+".ManageController",c["default"]).controller(j+".OthersSettingsController",f["default"]).controller(j+".ChangePasswordController",h["default"]).controller(j+".ResetRequestController",v["default"]).controller(j+".SetPasswordController",m["default"]).service(j+".userResource",b["default"]),t.exports={MODULE_NAME:j}},{"./controllers/ChangePasswordController.js":71,"./controllers/CreateController.js":72,"./controllers/EditController.js":73,"./controllers/ManageController.js":74,"./controllers/OthersSettingsController.js":75,"./controllers/ResetRequestController.js":76,"./controllers/SetPasswordController.js":77,"./resources/UserResource.js":79}],81:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(){function e(t,r,i,o,a,s,u,c,l,f,d){var h=this;n(this,e),this.typeResource=r,this.variableFormProvider=a,this.currentContainer=s,this.condition=d,this.stateParams=u,this.alert=c,this.state=l,this.translate=f,this.variable=t.getEntityObject(),this.formTouched=!1,o.$on("pageInfo.reload",function(e,t){f([h.getBreadcrumbText()]).then(function(e){i.clear().add(t.name,"tags",{containerId:t.id}).add(e[h.getBreadcrumbText()],"variables",{containerId:t.id}).broadcast()})})}return i(e,[{key:"getVariableTypes",value:function(){var e=this;this.typesPromise=this.typeResource.query(),this.typesPromise.then(function(t){if(e.types=t.data,e.variable.type&&void 0===e.variable.type.id)for(var r=0;r<e.types.length;r++)if(e.variable.type===e.types[r].id){e.variable.type=e.types[r],e.formTouched=!0;break}})}},{key:"setVariableType",value:function(e){this.variable.type=e,this.variable.value="",this.formTouched=!0}},{key:"getConfigurationTemplate",value:function(){var e=void 0!==this.variable.type.id?this.variable.type.id:this.variable.type;return this.variableFormProvider.getType(e).templateUrl}},{key:"submitForm",value:function(e){var t=this;this.variablePromise=e.save(this.stateParams.containerId),this.variablePromise.then(function(){t.currentContainer.makeChanges(),t.condition.refresh(),t.alert.success(t.getAlertType()),t.state.go("variables",{containerId:t.stateParams.containerId})},function(){t.alert.error("error.invalid")})}},{key:"displayInvalidFormMessage",value:function(){this.validateVariable=!0,this.alert.error("error.invalid")}}]),e}();r["default"]=o},{}],82:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=e("./BaseController.js"),c=n(u),l="Variables",f=function(e){function t(e,r,n,a,s,u,c,f,d,h,p){i(this,t);var v=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r,n,a,s,u,c,f,d,h,p));return v.variable=e.getEntityObject(),v.getVariableTypes(),u.getContainer().then(function(){u.$container.hasPermission("edit")||d.go("triggers",{containerId:c.containerId}),v.translate([v.getBreadcrumbText(),l]).then(function(e){n.clear().add(u.$container.name,"tags",{containerId:u.$container.id}).add(e[l],"variables",{containerId:u.$container.id}).add(e[v.getBreadcrumbText()]).broadcast()})}),v}return a(t,e),s(t,[{key:"getBreadcrumbText",value:function(){return"Add a new variable"}},{key:"getAlertType",value:function(){return"success.create"}}]),t}(c["default"]);r["default"]=f},{"./BaseController.js":81}],83:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=e("./BaseController.js"),c=n(u),l="Variables",f=function(e){function t(e,r,n,a,s,u,c,f,d,h,p){i(this,t);var v=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r,n,a,s,u,c,f,d,h,p));return v.variablePromise=e.get(c.variableId),v.variablePromise.then(function(e){v.variable=e,v.getVariableTypes()}),v.currentContainer.getContainer().then(function(){v.currentContainer.$container.hasPermission("noaccess")&&v.state.go("container"),v.translate([v.getBreadcrumbText(),l]).then(function(e){n.clear().add(v.currentContainer.$container.name,"tags",{containerId:v.currentContainer.$container.id}).add(e[l],"variables",{containerId:v.currentContainer.$container.id}).add(e[v.getBreadcrumbText()]).broadcast()})}),v.formTouched=!0,v}return a(t,e),s(t,[{key:"getBreadcrumbText",value:function(){return"Configure variable"}},{key:"getAlertType",value:function(){return"success.edit"}}]),t}(c["default"]);r["default"]=f},{"./BaseController.js":81}],84:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=void 0,a=void 0,s=void 0,u=void 0,c="Variables",l=function(){function e(t,r,i,l,f,d,h,p,v,g){var m=this;n(this,e),o=l,a=r,s=d,u=p,this.permissions=[],this.containerId=a.containerId,s.getContainer().then(function(e){s.$container.hasPermission("view")?m.permissions=s.$container.permissions:v.go("container"),g([c]).then(function(t){h.clear().add(e.name,"variable",{containerId:e.id}).add(t[c]).broadcast()})}),this.tableParams=new t({page:1,count:10,sorting:{name:"asc"}},{total:0,getData:function(e,t){i.query(a.containerId,f.list(t.url())).then(function(r){t.total(r.total),e.resolve(r.data)})}}),u.$on("pageInfo.reload",function(e,t){g([c]).then(function(e){h.clear().add(t.name,"variables",{containerId:t.id}).add(e[c]).broadcast()})})}return i(e,[{key:"removeVariable",value:function(e){var t=this;e.remove().then(function(){o.success("success.remove"),s.makeChanges(),1===t.tableParams.data.length&&t.tableParams.page()>1?t.tableParams.page(t.tableParams.page()-1):t.tableParams.reload()},function(){o.error("error.remove"),t.tableParams.reload()})}}]),e}();r["default"]=l},{}],85:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){e.stopPropagation(),e.cancelBubble=!0}function o(){var e=angular.element(document.getElementById("variables-list.html")).html();return l(e)(c)}function a(e,t){var r=l(u.getTemplate())(c),n=void 0;e.wrap(u.getElementWrapper()),n=e.parent(),n.append(r),n.append(t)}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=void 0,c=void 0,l=void 0,f=function(){function e(t,r,i,o){var a=this;n(this,e),l=t,c=r,u=i,o.allVariables().then(function(e){a.variables=e})}return s(e,[{key:"init",value:function(e,t){this.element=e,this.ngModel=t;var r=o();this.ulElement=r.children(),a(this.element,r)}},{key:"toggleVariablesList",value:function(e){var t=this.element.val().trim();this.isVariablesListVisible()?this.element.val(u.removeVariablePrompt(t)):this.element.val(u.addVariablePrompt(t)),this.ulElement.toggleClass("show"),i(e)}},{key:"addVariable",value:function(e){var t=this.element.val().trim();this.ulElement.removeClass("show"),this.ngModel.$setViewValue(u.selectVariable(t,e)),this.ngModel.$render(),this.element[0].focus()}},{key:"closeVariablePrompt",value:function(e){var t=this.element.val().trim();this.isVariablesListVisible()&&(this.ulElement.removeClass("show"),this.element.val(u.removeVariablePrompt(t)),i(e))}},{key:"isVariablesListVisible",value:function(){return this.ulElement.hasClass("show")}}]),e}();r["default"]=f},{}],86:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(e){return{restrict:"A",require:"variableSelector",link:function(t,r,n,i){function o(e){var t=!r[0].contains(e.target),n=i.isVariablesListVisible();t&&n&&r.val(i.closeVariablePrompt(e))}e.on("click",o),t.$on("$destroy",function(){e.off("click",o)})}}};r["default"]=n},{}],87:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var i=e("../controllers/SelectorController.js"),o=n(i),a=function(){return{restrict:"A",require:["variableSelector","ngModel"],scope:{},link:function(e,t,r,n){var i=n[0],o=n[1];i.init(t,o)},controller:o["default"],controllerAs:"selectorCtrl",bindToController:!0}};r["default"]=a},{"../controllers/SelectorController.js":85}],88:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(e){var t=function(){function t(){n(this,t),this.id=void 0,this.name=void 0,this.description=void 0,this.type=void 0,this.value=void 0,this.options=[],this.updatedAt=void 0}return i(t,[{key:"save",value:function(t){var r={},n=void 0,i=["id","updatedAt"];for(var o in this)!angular.isFunction(this[o])&&this.hasOwnProperty(o)&&i.indexOf(o)===-1&&("type"===o?r[o]=this[o].id:r[o]=this[o]);return n=void 0===this.id?e.post(t,r):e.put(this.id,r)}},{key:"remove",value:function(){return void 0!==this.id&&e["delete"](this.id)}}]),t}();return t};r["default"]=o},{}],89:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){var e=function t(){n(this,t),this.id=void 0,this.name=void 0,this.helper=void 0};return e};r["default"]=i},{}],90:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(){function e(){n(this,e),this.collection={}}return i(e,[{key:"addType",value:function(e,t){if(void 0!==this.collection[e])throw new Error("Form type with provided name already exist");return this.collection[e]=t,this}},{key:"getType",value:function(e){return void 0!==this.collection[e]&&this.collection[e]}},{key:"$get",value:function(){return this}}]),e}();r["default"]=o},{}],91:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=e("../entity/Variable.js"),s=n(a),u=function(e){var t=(0,s["default"])(this),r=new t;return r.id=e.id,r.name=e.name,r.description=e.description,r.type=e.type,r.value=e.value,r.options=e.options,r.updatedAt=e.updated_at,r},c=function(e,t){return e=angular.isArray(e)?e:[e],e.concat(t)},l=function(){function e(t,r){i(this,e),this.http=t,this.q=r}return o(e,[{key:"getEntityObject",value:function(){var e=(0,s["default"])(this);return new e}},{key:"get",value:function(e){var t=this,r=this.q.defer();return this.http({method:"GET",url:"/api/variables/"+e,transformResponse:c(this.http.defaults.transformResponse,function(e,r,n){return n<400?u.call(t,e.data):e})}).success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise}},{key:"query",value:function(e,t){var r=this,n=this.q.defer();return this.http({method:"GET",url:"/api/containers/"+e+"/variables",params:t,transformResponse:c(this.http.defaults.transformResponse,function(e){for(var t in e.data)e.data[t]instanceof Object&&(e.data[t]=u.call(r,e.data[t]));return e})}).success(function(e){n.resolve(e)}).error(function(e){n.reject(e)}),n.promise}},{key:"queryAllAvailable",value:function(e,t){var r=this,n=this.q.defer();return this.http({method:"GET",url:"/api/containers/"+e+"/available-variables",params:t,transformResponse:c(this.http.defaults.transformResponse,function(e){for(var t in e.data)e.data[t]instanceof Object&&(e.data[t]=u.call(r,e.data[t]));return e})}).success(function(e){n.resolve(e)}).error(function(e){n.reject(e)}),n.promise}},{key:"delete",value:function(e){var t=this.q.defer();return this.http({method:"DELETE",url:"/api/variables/"+e}).success(function(e){t.resolve(e)}).error(function(e){t.reject(e)}),t.promise}},{key:"post",value:function(e,t){var r=this,n=this.q.defer();return this.http({method:"POST",url:"/api/containers/"+e+"/variables",data:t,transformResponse:c(this.http.defaults.transformResponse,function(e,t,n){return n<400?u.call(r,e.data):e})}).success(function(e){n.resolve(e)}).error(function(e){n.reject(e)}),n.promise}},{key:"put",value:function(e,t){var r=this,n=this.q.defer();return this.http({method:"PUT",url:"/api/variables/"+e,data:t,transformResponse:c(this.http.defaults.transformResponse,function(e,t,n){return n<400?u.call(r,e.data):e})}).success(function(e){n.resolve(e)}).error(function(e){n.reject(e)}),n.promise}}]),e}();r["default"]=l},{"../entity/Variable.js":88}],92:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=e("../entity/VariableType.js"),s=n(a),u=function(e){var t=(0,s["default"])(this),r=new t;return r.id=e.id,r.name=e.name,r.helper=e.helper,r},c=function(e,t){return e=angular.isArray(e)?e:[e],e.concat(t)},l=function(){function e(t,r){i(this,e),this.http=t,this.q=r}return o(e,[{key:"getEntityObject",value:function(){var e=(0,s["default"])(this);return new e}},{key:"query",value:function(e){var t=this,r=this.q.defer();return this.http({method:"GET",url:"/api/variable-types",params:e,transformResponse:c(this.http.defaults.transformResponse,function(e){for(var r in e.data)e.data[r]instanceof Object&&(e.data[r]=u.call(t,e.data[r]));return e})}).success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise}}]),e}();r["default"]=l},{"../entity/VariableType.js":89}],93:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){return"{{"===e.slice(-2)}function o(e){return(e+" {{").trim()}function a(e){return e.substring(0,e.length-2).trim()}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u='\n    <span class="input-group-addon" ng-click="selectorCtrl.toggleVariablesList($event)" style="cursor: pointer;">\n        <i class="icon-variable-insert"></i>\n    </span>',c='<div class="input-group cc-select"></div>',l=function(){function e(){n(this,e)}return s(e,[{key:"getTemplate",value:function(){return u}},{key:"getElementWrapper",value:function(){return c}},{key:"addVariablePrompt",value:function(e){var t=i(e)?e:o(e);return t}},{key:"selectVariable",value:function(e,t){return(e+" "+t.name+" }}").trim()}},{key:"removeVariablePrompt",value:function(e){return i(e)?a(e):e}}],[{key:"selectorFactory",value:function(){return new e}}]),e}();r["default"]=l},{}],94:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var i=e("./controllers/ManageController.js"),o=n(i),a=e("./controllers/CreateController.js"),s=n(a),u=e("./controllers/EditController.js"),c=n(u),l=e("./controllers/SelectorController"),f=n(l),d=e("./resource/VariableResource.js"),h=n(d),p=e("./resource/VariableTypeResource.js"),v=n(p),g=e("./providers/VariableFormProvider.js"),m=n(g),y=e("./services/VariableSelector.js"),b=n(y),j=e("./directives/variableSelector.js"),w=n(j),P=e("./directives/variableClickOutside.js"),_=n(P),C="clearcode.tm.variable",O="app/modules/variable",T="clearcode.tm.condition";o["default"].$inject=["ngTableParams","$stateParams",C+".variableResource","clearcode.tm.alert.alert","clearcode.tm.tagContainer.paramConverter","clearcode.tm.tagContainer.currentContainer","clearcode.tm.pageInfo.pageInfo","$scope","$state","$translate"],f["default"].$inject=["$compile","$scope",C+".variableSelector",T+".condition"],s["default"].$inject=[C+".variableResource",C+".variableTypeResource","clearcode.tm.pageInfo.pageInfo","$scope",C+".$variableForm","clearcode.tm.tagContainer.currentContainer","$stateParams","clearcode.tm.alert.alert","$state","$translate","clearcode.tm.condition.condition"],c["default"].$inject=[C+".variableResource",C+".variableTypeResource","clearcode.tm.pageInfo.pageInfo","$scope",C+".$variableForm","clearcode.tm.tagContainer.currentContainer","$stateParams","clearcode.tm.alert.alert","$state","$translate","clearcode.tm.condition.condition"],h["default"].$inject=["$http","$q"],_["default"].$inject=["$document"],v["default"].$inject=["$http","$q"],angular.module(C,["pascalprecht.translate","ui.router","ngTable","clearcode.tm.alert","clearcode.tm.pageInfo","clearcode.tm.tagContainer"]).config(["$stateProvider",function(e){e.state("variables",{url:"/containers/{containerId}/variables",controller:C+".ManageController as view",templateUrl:O+"/views/manage.html",data:{roles:["ROLE_SUPER_ADMIN"],hasContainerList:!0}}).state("variableCreate",{url:"/containers/{containerId}/variable-create",controller:C+".CreateController as view",templateUrl:O+"/views/create.html",data:{roles:["ROLE_SUPER_ADMIN"],hasContainerList:!0}}).state("variableEdit",{url:"/containers/{containerId}/variable-edit/{variableId}",controller:C+".EditController as view",templateUrl:O+"/views/edit.html",data:{roles:["ROLE_SUPER_ADMIN"],hasContainerList:!0}})}]).run(["clearcode.tm.alert.$alert",function(e){e.addMessagePattern("variables.close","You are trying to close unsaved variable.")}]).controller(C+".ManageController",o["default"]).controller(C+".CreateController",s["default"]).controller(C+".EditController",c["default"]).controller(C+".SelectorController",f["default"]).service(C+".variableResource",h["default"]).service(C+".variableTypeResource",v["default"]).provider(C+".$variableForm",m["default"]).service(C+".variableSelector",b["default"]).directive("variableSelector",w["default"]).directive("variableClickOutside",_["default"]),t.exports={MODULE_NAME:C}},{"./controllers/CreateController.js":82,"./controllers/EditController.js":83,"./controllers/ManageController.js":84,"./controllers/SelectorController":85,"./directives/variableClickOutside.js":86,"./directives/variableSelector.js":87,"./providers/VariableFormProvider.js":90,
"./resource/VariableResource.js":91,"./resource/VariableTypeResource.js":92,"./services/VariableSelector.js":93}],95:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var i=e("./providers/AlertProvider.js"),o=n(i),a=e("./controllers/AlertController.js"),s=n(a),u=e("./directives/AlertDirective.js"),c=n(u),l=e("./services/Alert.js"),f=n(l),d=e("./services/RefreshAlert.js"),h=n(d),p=e("./services/AlertStorage.js"),v=n(p),g=e("./services/UniqueStorage.js"),m=n(g),y="clearcode.tm.alert";f["default"].$inject=["$timeout",y+".alertStorage",y+".$alert","$translate"],h["default"].$inject=["$timeout",y+".alertStorage",y+".$alert","$translate","$window"],c["default"].$inject=[y+".alert",y+".$alert","$window"],s["default"].$inject=[y+".alertStorage"],angular.module(y,["pascalprecht.translate","ngSanitize","ngAnimate"]).provider(y+".$alert",o["default"]).factory(y+".alertStorage",function(){return new v["default"]}).factory(y+".alertUniqueStorage",function(){return new m["default"]}).service(y+".alert",f["default"]).service(y+".refreshAlert",h["default"]).directive("ccNotification",c["default"]).controller(y+".AlertController",s["default"]),t.exports={MODULE_NAME:y}},{"./controllers/AlertController.js":96,"./directives/AlertDirective.js":97,"./providers/AlertProvider.js":98,"./services/Alert.js":99,"./services/AlertStorage.js":100,"./services/RefreshAlert.js":101,"./services/UniqueStorage.js":102}],96:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(){function e(t){n(this,e),this.storage=t}return i(e,[{key:"getAll",value:function(){return this.storage.getAlerts()}},{key:"remove",value:function(e){this.storage.remove(e)}},{key:"clear",value:function(){this.storage.clean()}}]),e}();r["default"]=o},{}],97:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(e,t){return{restrict:"E",templateUrl:"modules/alert/views/alert.html",scope:{interval:"="},controller:"clearcode.tm.alert.AlertController",controllerAs:"alertCtrl",link:function(r){e.settings.interval=angular.isDefined(r.interval)?r.interval:t.interval}}};r["default"]=n},{}],98:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(){function e(){n(this,e),this.interval=6e3,this.messagePatterns={}}return o(e,[{key:"addMessagePattern",value:function(e,t){if(void 0!==this.messagePatterns[e])throw new Error("Pattern with provided id already exist");return this.messagePatterns[e]=t,this}},{key:"addMessagesPattern",value:function(e){var t=this;if(!angular.isArray(e))throw new Error("AlertProvider.addMessagesPattern expects\n                 first argument to be Array but received "+("undefined"==typeof e?"undefined":i(e)));return angular.forEach(e,function(e){angular.isObject(e)&&angular.forEach(e,function(e,r){t.addMessagePattern(r,e)})}),this}},{key:"getMessagePattern",value:function(e){return void 0!==this.messagePatterns[e]&&this.messagePatterns[e]}},{key:"$get",value:function(){return this}}]),e}();r["default"]=a},{}],99:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(e){var t=this;if(this.settings.interval>0)return this.$timeout(function(){t.storage.remove(e)},this.settings.interval)},a=function(e,t,r){var n=this,i=void 0,a=this.convertToMessage(t,r);this.translate([a]).then(function(t){return i=n.storage.add(e,t[a]),o.call(n,i),i})},s=function(){function e(t,r,i,o){n(this,e),this.storage=r,this.$timeout=t,this.settings=void 0===this.settings?i:angular.extend(this.settings,i),this.INFO_TYPE="info",this.ERROR_TYPE="danger",this.SUCCESS_TYPE="success",this.translate=o}return i(e,[{key:"success",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];a.call(this,this.SUCCESS_TYPE,e,t)}},{key:"error",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];a.call(this,this.ERROR_TYPE,e,t)}},{key:"info",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];a.call(this,this.INFO_TYPE,e,t)}},{key:"getStorage",value:function(){return this.storage}},{key:"convertToMessage",value:function(e,t){return angular.isDefined(e)&&(e=this.settings.getMessagePattern(e)),vsprintf(e,t)}}]),e}();r["default"]=s},{}],100:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=void 0,a=function(){function e(){n(this,e),o=0,this.collection={}}return i(e,[{key:"getAlerts",value:function(){return this.collection}},{key:"getAlert",value:function(e){return this.collection[e]}},{key:"add",value:function(e,t){return this.collection[o]={type:e,message:t},o++}},{key:"has",value:function(e,t){for(var r in this.collection)if(e===this.collection[r].type&&t===this.collection[r].message)return!0;return!1}},{key:"remove",value:function(e){return void 0!==this.collection[e]&&(delete this.collection[e],!0)}},{key:"clean",value:function(){this.collection={}}}]),e}();r["default"]=a},{}],101:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=function d(e,t,r){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var i=Object.getPrototypeOf(e);return null===i?void 0:d(i,t,r)}if("value"in n)return n.value;var o=n.get;if(void 0!==o)return o.call(r)},c=e("./Alert.js"),l=n(c),f=function(e){function t(e,r,n,a,s){i(this,t);var u=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r,n,a));return u.window=s,u}return a(t,e),s(t,[{key:"success",value:function(e,r){this.window.localStorage[e]&&(u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"success",this).call(this,r),this.window.localStorage.removeItem(e))}}]),t}(l["default"]);r["default"]=f},{"./Alert.js":99}],102:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=function d(e,t,r){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var i=Object.getPrototypeOf(e);return null===i?void 0:d(i,t,r)}if("value"in n)return n.value;var o=n.get;if(void 0!==o)return o.call(r)},c=e("./AlertStorage.js"),l=n(c),f=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"add",value:function(e,r){return this.has(e,r)?-1:u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"add",this).call(this,e,r)}}]),t}(l["default"]);r["default"]=f},{"./AlertStorage.js":100}],103:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var i=e("./directives/clipboardDirective.js"),o=n(i),a="clearcode.tm.clipboard";o["default"].$inject=["$compile","$document"],angular.module(a,["ngClipboard"]).directive("ccClipboard",o["default"]),t.exports={MODULE_NAME:a}},{"./directives/clipboardDirective.js":104}],104:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(e,t){return{restrict:"A",scope:{ngModel:"="},link:function(r,n){function i(e){return function(t){o(t)&&(e?c.removeClass("hidden"):c.addClass("hidden"))}}function o(e){var t=e.target||e.srcElement;return t&&"TEXTAREA"===t.nodeName}n.wrap('<div class="cc-clipboard"></div>');var a=angular.element(t[0].getElementById("clipboard.html")).html(),s=e(a)(r),u=n.parent();u.append(s);var c=u.find("button");c.addClass("hidden"),u.on("mouseenter",i(!0)).on("mouseleave",i(!1)),r.copyToClipboard=function(){return r.ngModel}}}};r["default"]=n},{}],105:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var i=e("./directives/ConfirmDirective.js"),o=n(i),a="clearcode.tm.confirm";angular.module(a,[]).directive("ccConfirm",o["default"]),t.exports={MODULE_NAME:a}},{"./directives/ConfirmDirective.js":106}],106:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){return{restrict:"A",templateUrl:"modules/confirm/views/confirm.html",transclude:!0,replace:!0,scope:{ccConfirm:"&"},link:function(e){e.turnOn=!1,e.approve=function(){e.ccConfirm()},e.cancel=function(){e.turnOn=!1},e.confirm=function(){e.turnOn=!0}}}};r["default"]=n},{}],107:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var s=e("../../alert/controllers/AlertController.js"),u=n(s),c=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),t}(u["default"]);r["default"]=c},{"../../alert/controllers/AlertController.js":96}],108:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(e,t){return{restrict:"E",templateUrl:"modules/form/views/alertForm.html",scope:{interval:"="},controller:"clearcode.tm.form.AlertFormController",controllerAs:"alertFormCtrl",link:function(r){e.settings.interval=angular.isDefined(r.interval)?r.interval:t.interval}}};r["default"]=n},{}],109:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){return{restrict:"A",require:"?ngModel",scope:{ngModel:"=",ngDisabled:"="},link:function(e,t,r){function n(e){e===!0||i(e)?t.parent().addClass(o):t.parent().removeClass(o)}function i(e){return void 0!==r.ngTrueValue&&e===r.ngTrueValue}var o="cc-checkbox-checked",a="cc-checkbox-disabled";t.wrap('<div class="cc-checkbox"></div>'),void 0!==e.ngModel&&n(e.ngModel),e.$watch("ngModel",n),e.$watch("ngDisabled",function(e){e?t.parent().addClass(a):t.parent().removeClass(a)})}}};r["default"]=n},{}],110:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){return{restrict:"A",require:"?ccRadioModel",scope:{ccRadioModel:"=",ccDisabled:"="},link:function(e,t,r){t.wrap('<div class="cc-radio"></div>'),void 0!==e.ccRadioModel&&(e.ccDisabled&&t.parent().addClass("radioDisabled"),e.ccRadioModel===t[0].defaultValue?t.parent().addClass("radioSelected"):t.parent().removeClass("radioSelected")),e.$watch("ccRadioModel",function(e){e===t[0].defaultValue?t.parent().addClass("radioSelected"):t.parent().removeClass("radioSelected")})}}};r["default"]=n},{}],111:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(e){return{restrict:"A",priority:1,scope:{ngModel:"=",ccSelectOptions:"=",ccSelectValue:"@",ccSelectLabel:"@"},link:function(t,r,n){r.wrap('<div class="cc-select"></div>'),r.addClass("ng-hide");var i=angular.element(document.getElementById("select-template.html")).html(),o=e(i)(t);r.parent().append(o),t.id=n.id;var a=function(e){for(var r in t.ccSelectOptions)if(t.ccSelectOptions[r][t.ccSelectValue]===e)return r;return!1};t.getActiveOptionLabel=function(){var e=a(t.ngModel);return e!==!1?t.ccSelectOptions[e][t.ccSelectLabel]:""},t.changeSelection=function(e){t.ngModel=e[t.ccSelectValue]}}}};r["default"]=n},{}],112:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var i=e("./directives/CheckboxDirective.js"),o=n(i),a=e("./directives/RadioButtonDirective.js"),s=n(a),u=e("./directives/SelectDirective.js"),c=n(u),l=e("./services/AlertForm.js"),f=n(l),d=e("./directives/AlertFormDirective.js"),h=n(d),p=e("./controller/AlertFormController.js"),v=n(p),g="clearcode.tm.form";f["default"].$inject=["$timeout","clearcode.tm.alert.alertUniqueStorage","clearcode.tm.alert.$alert","$translate"],h["default"].$inject=[g+".alertForm","clearcode.tm.alert.$alert"],v["default"].$inject=["clearcode.tm.alert.alertUniqueStorage"],c["default"].$inject=["$compile"],angular.module(g,["pascalprecht.translate","clearcode.tm.alert"]).service(g+".alertForm",f["default"]).directive("ccSelect",c["default"]).directive("ccCheckbox",o["default"]).directive("ccRadio",s["default"]).directive("ccNotificationForm",h["default"]).controller(g+".AlertFormController",v["default"]),t.exports={MODULE_NAME:g}},{"./controller/AlertFormController.js":107,"./directives/AlertFormDirective.js":108,"./directives/CheckboxDirective.js":109,"./directives/RadioButtonDirective.js":110,"./directives/SelectDirective.js":111,"./services/AlertForm.js":113}],113:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var s=e("../../alert/services/Alert.js"),u=n(s),c=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),t}(u["default"]);r["default"]=c},{"../../alert/services/Alert.js":99}],114:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){return{restrict:"EA",replace:!0,scope:{content:"@",placement:"@"},templateUrl:"modules/helpSystem/views/helpSystem.html"}};r["default"]=n},{}],115:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var i=e("./directives/HelpSystemDirective.js"),o=n(i),a="clearcode.tm.helpSystem";angular.module(a,[]).directive("ccHelp",o["default"]),t.exports={MODULE_NAME:a}},{"./directives/HelpSystemDirective.js":114}],116:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i,o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(){function e(t,r,o){var a=this;n(this,e),this.breadcrumb=o.get(),i=r,t.$on("page.info",function(){a.breadcrumb=o.get()})}return o(e,[{key:"stateGo",value:function(e){i.go(e.state,e.params)}}]),e}();r["default"]=a},{}],117:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o="Impono Tag Manager",a=function(){function e(t,r){var i=this;n(this,e),this.title=o,this["default"]=o,t.$on("page.info",function(){i.info=r.get(),i.setTitle()})}return i(e,[{key:"setTitle",value:function(){this.title=this.info.map(function(e){return e.name}).reduce(function(e,t){return e+=" - "+t})}}]),e}();r["default"]=a},{}],118:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){return{restrict:"E",templateUrl:"modules/pageInfo/views/breadcrumb.html",controller:"clearcode.tm.pageInfo.BreadcrumbController",controllerAs:"breadcrumbCtrl"}};r["default"]=n},{}],119:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){return{restrict:"A",controller:"clearcode.tm.pageInfo.TitleController",controllerAs:"titleCtrl"}};r["default"]=n},{}],120:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var i=e("./controllers/BreadcrumbController.js"),o=n(i),a=e("./controllers/TitleController.js"),s=n(a),u=e("./directives/BreadcrumbDirective.js"),c=n(u),l=e("./services/PageInfo.js"),f=n(l),d=e("./directives/TitleDirective.js"),h=n(d),p="clearcode.tm.pageInfo";o["default"].$inject=["$scope","$state",p+".pageInfo"],s["default"].$inject=["$scope",p+".pageInfo"],f["default"].$inject=["$rootScope"],angular.module(p,[]).controller(p+".BreadcrumbController",o["default"]).controller(p+".TitleController",s["default"]).directive("ccBreadcrumb",c["default"]).directive("ccTitle",h["default"]).service(p+".pageInfo",f["default"]),t.exports={MODULE_NAME:p}},{"./controllers/BreadcrumbController.js":116,"./controllers/TitleController.js":117,"./directives/BreadcrumbDirective.js":118,"./directives/TitleDirective.js":119,"./services/PageInfo.js":121}],121:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i,o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(){function e(t){n(this,e),this.navigation=[],i=t}return o(e,[{key:"add",value:function(e,t,r){return this.navigation.push({name:e,state:t,params:r}),this}},{key:"clear",value:function(){return this.navigation=[],this}},{key:"broadcast",value:function(){i.$broadcast("page.info")}},{key:"get",value:function(){return this.navigation}}]),e}();r["default"]=a},{}],122:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){return function(e){return Math.ceil(e)}};r["default"]=n},{}],123:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(e,t){var r=e("date");return function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return null===n&&(n=t),r(e,n)}};r["default"]=n},{}],124:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var i=e("./filters/tmDateFilter.js"),o=n(i),a=e("./filters/tmCeilFilter.js"),s=n(a),u="clearcode.tm.sanitize";o["default"].$inject=["$filter","defaultDateFormat"],angular.module(u,[]).filter("tmDate",o["default"]).filter("tmCeil",s["default"]),t.exports={MODULE_NAME:u}},{"./filters/tmCeilFilter.js":122,"./filters/tmDateFilter.js":123}],125:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(){function e(t){n(this,e),this.$window=t}return i(e,[{key:"lint",value:function(e,t){return this.$window.HTMLHint?this.$window.HTMLHint.verify(e,t):[]}}]),e}();r["default"]=o},{}],126:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o={"tagname-lowercase":!1,"attr-lowercase":!1,"attr-value-double-quotes":!1,"attr-value-not-empty":!1,"attr-no-duplication":!1,"doctype-first":!1,"tag-pair":!1,"tag-self-close":!1,"spec-char-escape":!1,"id-unique":!1,"src-not-empty":!1,"title-require":!1,"head-script-disabled":!1,"doctype-html5":!1,"id-class-value":!1,"style-disabled":!1,"inline-style-disabled":!1,"inline-script-disabled":!1,"space-tab-mixed-disabled":!1,"id-class-ad-disabled":!1,"href-abs-or-rel":!1,"attr-unsafe-chars":!1},a={browser:!0,devel:!0,dojo:!0,jquery:!0,mootools:!0,nonstandard:!0,prototypejs:!0,yui:!0,bitwise:!1,camelcase:!1,curly:!0,enforceall:!1,eqeqeq:!0,es3:!1,es5:!1,forin:!1,freeze:!1,funcscope:!0,futurehostile:!0,immed:!1,latedef:!1,nocomma:!0,nonew:!0,notypeof:!0,shadow:"inner",strict:!1,sub:!1,undef:!0,unused:!0,asi:!0},s=function(){function e(){n(this,e)}return i(e,[{key:"getLintingRules",value:function(){var e=angular.copy(a),t=angular.copy(o);return t.jshint=e,t}}]),e}();r["default"]=s},{}],127:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o="<!DOCTYPE HTML><html><head>",a="</head><body></body></html>",s=function(){function e(t,r,i){n(this,e),this.tagTemplateToJsConverter=t,this.lintingRules=r,this.htmlLinter=i}return i(e,[{key:"validate",value:function(e,t,r){if(t.deactivate)return[];var n=this.wrapInHtmlTag(e),i=n.split("\n");this.tagTemplateToJsConverter.convert(i,r.options);for(var o=i.join("\n"),a=this.lint(o,t),s=this.filterOutHtmlErrors(a,i.length),u=[],c=0;c<s.length;c++)u.push(this.mapToLintRepresentation(s[c]));return u}},{key:"wrapInHtmlTag",value:function(e){return o+"\n                "+e+"\n                "+a}},{key:"filterOutHtmlErrors",value:function(e,t){for(var r=[],n=0;n<e.length;n++){var i=e[n];this.isHtmlError(i,t)||(i.line-=1,r.push(i))}return r}},{key:"isHtmlError",value:function(e,t){return 0===e.line||e.line===t}},{key:"lint",value:function(e,t){t=t||{};var r=angular.extend({},this.lintingRules.getLintingRules(),t);return this.htmlLinter.lint(e,r)}},{key:"mapToLintRepresentation",value:function(e){return{from:CodeMirror.Pos(e.line-1,0),to:CodeMirror.Pos(e.line-1,0),message:e.message,severity:e.type}}}]),e}();r["default"]=s},{}],128:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o="{{",a="}}",s=function(){function e(){n(this,e)}return i(e,[{key:"convert",value:function(e,t){if(!t||!t.variables)return e;for(var r=this.getVariables(t),n=0;!this.isCursorAfterTheEndOfText(e.length,n);){var i=e[n],a=i.indexOf(o)!==-1;a&&(e[n]=this.replaceVariablesExpressions(r,i)),++n}return e}},{key:"isCursorAfterTheEndOfText",value:function(e,t){return t>=e}},{key:"getVariables",value:function(e){for(var t=[],r=0;r<e.variables.length;r++){var n=e.variables[r],i=n.name.trim().split(/\s+/),o={name:n.name,pattern:this.createVariableSearchPattern(n.name),replacement:"'"+i.join("_")+"'"};t.push(o)}return t}},{key:"createVariableSearchPattern",value:function(e){var t="[\\s]",r=e.split(/[\s]+/),n=r.join(t+"+");return n=""+o+t+"*"+n+t+"*"+a,new RegExp(n,"g")}},{key:"replaceVariablesExpressions",value:function(e,t){for(var r=0;r<e.length;r++){var n=e[r];t=t.replace(n.pattern,n.replacement)}return t}}]),e}();r["default"]=s},{}],129:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o={mode:{name:"htmlmixed"},lineNumbers:!0,styleActiveLine:!0,matchBrackets:!0,theme:"stg",gutters:["CodeMirror-lint-markers"],lint:{}},a=function(){function e(t){n(this,e),this.tagTemplateLinter=t}return i(e,[{key:"getConfig",value:function(e){var t=this,r=angular.isObject(e)?e:{},n=angular.extend({},o,r);return n.lint.getAnnotations=function(e,r,n){return t.tagTemplateLinter.validate(e,r,n)},n}}]),e}();r["default"]=a},{}],130:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var i=e("./service/TextEditorConfig.js"),o=n(i),a=e("./service/TagTemplateLinter.js"),s=n(a),u=e("./service/TagTemplateToJsConverter.js"),c=n(u),l=e("./service/LintingRules.js"),f=n(l),d=e("./service/HTMLLinter.js"),h=n(d),p="clearcode.tm.textEditor";o["default"].$inject=[p+".TagTemplateLinter"],s["default"].$inject=[p+".TagTemplateToJsConverter",p+".LintingRules",p+".HTMLLinter"],h["default"].$inject=["$window"],angular.module(p,[]).service(p+".LintingRules",f["default"]).service(p+".HTMLLinter",h["default"]).service(p+".TagTemplateToJsConverter",c["default"]).service(p+".TagTemplateLinter",s["default"]).service(p+".TextEditorConfig",o["default"]).run(["$rootScope",p+".TextEditorConfig",function(e,t){e.TextEditorConfig=t}]),t.exports={MODULE_NAME:p}},{"./service/HTMLLinter.js":125,"./service/LintingRules.js":126,"./service/TagTemplateLinter.js":127,"./service/TagTemplateToJsConverter.js":128,"./service/TextEditorConfig.js":129}],131:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(e,t){return function(r){var n=t.defer();return e({method:"GET",url:r.url,cache:r.cache}).success(function(e){n.resolve(e)}).error(function(){n.reject()}),n.promise}};r["default"]=n},{}],132:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(){function e(t){n(this,e),this.languages=[],this.translationFactory=t}return i(e,[{key:"getLanguages",value:function(){return this.languages}},{key:"hasLanguage",value:function(e){return this.languages.hasOwnProperty(e)}},{key:"loadAvailableTranslations",value:function(){var e=this;return this.translationFactory({url:"/api/translations",cache:!1}).then(function(t){for(var r in t)e.languages.push({id:r,name:t[r]})})}}]),e}();r["default"]=o},{}],133:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var i=e("./factory/TranslationFactory.js"),o=n(i),a=e("./services/Translation.js"),s=n(a),u="clearcode.tm.translation";o["default"].$inject=["$http","$q"],s["default"].$inject=[u+".translationFactory"],angular.module(u,[]).factory(u+".translationFactory",o["default"]).service(u+".translation",s["default"]),t.exports={MODULE_NAME:u}},{"./factory/TranslationFactory.js":131,"./services/Translation.js":132}],134:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},i=function(e){return"object"===("undefined"==typeof e?"undefined":n(e))&&"function"==typeof e.then},o=function(e,t){function r(e,t){return e.errors.fields[t]instanceof Array&&0!==e.errors.fields[t].length}function n(e,t,r){return e.errors.fields[t].fields.hasOwnProperty(r)&&0!==e.errors.fields[t].fields[r].length}return{restrict:"A",scope:{formResource:"="},link:function(o,a){o.$watch("formResource",function(s){s&&i(s)&&s.then(function(){},function(i){i.errors.hasOwnProperty("form")&&(e.getMessagePattern("login.server")||e.addMessagePattern("login.server",i.errors.form[0]),t.getStorage().clean(),t.error("login.server"));for(var s in i.errors.fields)if(i.errors.fields.hasOwnProperty(s)){var u=o.$parent[a[0].attributes.name.value];if(r(i,s))u[s].$invalid=!0,u[s].$setDirty(),u[s].$error[s]=i.errors.fields[s];else for(var c in i.errors.fields[s].fields)n(i,s,c)&&(u[c].$invalid=!0,u[c].$error[c]=i.errors.fields[s].fields[c])}})},!1)}}};r["default"]=o},{}],135:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var i=e("./directives/stgFormDirective.js"),o=n(i),a="clearcode.tm.validator";o["default"].$inject=["clearcode.tm.alert.$alert","clearcode.tm.form.alertForm"],angular.module(a,["clearcode.tm.alert","clearcode.tm.form"]).directive("stgForm",o["default"]),t.exports={MODULE_NAME:a}},{"./directives/stgFormDirective.js":134
}]},{},[1]);
//# sourceMappingURL=app.js.map
